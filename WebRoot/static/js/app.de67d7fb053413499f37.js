webpackJsonp([1],{"2jHi":function(e,t){},"7CdH":function(e,t){},"7YWv":function(e,t){},"7y7/":function(e,t){},"8KtS":function(e,t){},A3e3:function(e,t){},GJf8:function(e,t){},NHnr:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("7+uW"),n=o("zL8q"),r=o.n(n),s=(o("tvR6"),o("mtWM")),l=o.n(s),i={name:"App",data:function(){return{activeIndex:"1",showLogin:!1,isLogin:"true"==window.sessionStorage.getItem("isLogin"),validateForm:{account:"",password:""},rules:{account:[{required:!0,message:"请选择",trigger:"blur"}],password:[{required:!0,message:"请选择",trigger:"blur"}]}}},methods:{handleSelect:function(e,t){console.log(e,t)},login:function(e){var t=this,o=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var a=new URLSearchParams;a.append("username",t.validateForm.account),a.append("password",t.validateForm.password),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/admin/login.do",header:{"Content-Type":"application/x-www-form-urlencoded"},data:a}).then(function(e){console.log(e),4005==e.data.statusCode?alert(e.data.message):102==e.data.statusCode?(window.sessionStorage.setItem("adminId",e.data.result.adminId),window.sessionStorage.setItem("token",e.data.result.token),window.sessionStorage.setItem("isLogin",!0),o.isLogin=!0,o.showLogin=!1):alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})})},logout:function(e){var t=this;l()({method:"get",dataType:"json",url:"http://47.93.190.186:8080/logout.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")}}).then(function(e){console.log(e),4005==e.data.statusCode?alert(e.data.message):102==e.data.statusCode?(t.isLogin=!1,window.sessionStorage.setItem("isLogin",!1),alert("成功退出登录")):alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},handleClose:function(e){e()}},mounted:function(){console.log(this.isLogin)}},c={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,mode:"horizontal"},on:{select:e.handleSelect}},[o("el-menu-item",{attrs:{index:"1"}},[o("router-link",{staticClass:"router",attrs:{to:"/UserProtocol"}},[e._v("用户协议")])],1),e._v(" "),o("el-submenu",{attrs:{index:"2"}},[o("template",{slot:"title"},[e._v("关于社团")]),e._v(" "),o("el-menu-item",{attrs:{index:"2-1"}},[o("router-link",{staticClass:"router",attrs:{to:"/Carousel"}},[e._v("管理轮播图")])],1),e._v(" "),o("el-menu-item",{attrs:{index:"2-2"}},[o("router-link",{staticClass:"router",attrs:{to:"/ManagePush"}},[e._v("管理推送")])],1)],2),e._v(" "),o("el-submenu",{attrs:{index:"3"}},[o("template",{slot:"title"},[e._v("审核预约数据")]),e._v(" "),o("el-menu-item",{attrs:{index:"3-1"}},[o("router-link",{staticClass:"router",attrs:{to:"/ManageOrder"}},[e._v("管理预约数据")])],1)],2),e._v(" "),o("el-submenu",{attrs:{index:"5"}},[o("template",{slot:"title"},[e._v("意见反馈与帮助")]),e._v(" "),o("el-menu-item",{attrs:{index:"5-1"}},[o("router-link",{staticClass:"router",attrs:{to:"/CheckFeedbacks"}},[e._v("查看意见反馈")])],1),e._v(" "),o("el-menu-item",{attrs:{index:"5-2"}},[o("router-link",{staticClass:"router",attrs:{to:"/CheckReports"}},[e._v("查看举报")])],1),e._v(" "),o("el-menu-item",{attrs:{index:"5-3"}},[o("router-link",{staticClass:"router",attrs:{to:"/ManageHelp"}},[e._v("管理帮助项")])],1)],2),e._v(" "),o("el-submenu",{attrs:{index:"6"}},[o("template",{slot:"title"},[e._v("维护书库")]),e._v(" "),o("el-menu-item",{attrs:{index:"6-1"}},[o("router-link",{staticClass:"router",attrs:{to:"/AddBook"}},[e._v("添加新书")])],1),e._v(" "),o("el-menu-item",{attrs:{index:"6-2"}},[o("router-link",{staticClass:"router",attrs:{to:"/ManageBook"}},[e._v("管理书库")])],1),e._v(" "),o("el-menu-item",{attrs:{index:"6-3"}},[o("router-link",{staticClass:"router",attrs:{to:"/SearchShareBook"}},[e._v("管理分享书籍")])],1),e._v(" "),o("el-menu-item",{attrs:{index:"6-4"}},[o("router-link",{staticClass:"router",attrs:{to:"/ManageGoodBooks"}},[e._v("管理好书")])],1),e._v(" "),o("el-menu-item",{attrs:{index:"6-5"}},[o("router-link",{staticClass:"router",attrs:{to:"/ManageBookComment"}},[e._v("管理书评")])],1),e._v(" "),o("el-menu-item",{attrs:{index:"6-6"}},[o("router-link",{staticClass:"router",attrs:{to:"/ManageGoodBookComment"}},[e._v("管理精彩书评")])],1),e._v(" "),o("el-menu-item",{attrs:{index:"6-7"}},[o("router-link",{staticClass:"router",attrs:{to:"/ManageVote"}},[e._v("管理投票")])],1),e._v(" "),o("el-menu-item",{attrs:{index:"6-8"}},[o("router-link",{staticClass:"router",attrs:{to:"/SearchBook"}},[e._v("搜索图书")])],1)],2),e._v(" "),o("el-submenu",{attrs:{index:"7"}},[o("template",{slot:"title"},[e._v("【社区】")]),e._v(" "),o("el-menu-item",{attrs:{index:"7-1"}},[o("router-link",{staticClass:"router",attrs:{to:"/ManageWishBook"}},[e._v("管理愿望书单")])],1)],2),e._v(" "),o("el-menu-item",{attrs:{index:"4"}},[o("router-link",{staticClass:"router",attrs:{to:"/ManageTimeSlot"}},[e._v("管理预约时间地点")])],1),e._v(" "),e.isLogin?o("el-menu-item",{attrs:{index:"8"},on:{click:e.logout}},[e._v("\n\t\t\t\t退出登录\n\t\t\t")]):o("el-menu-item",{attrs:{index:"8"},on:{click:function(t){e.showLogin=!0}}},[e._v("\n\t\t\t\t登录\n\t\t\t")])],1),e._v(" "),o("el-dialog",{attrs:{"before-close":e.handleClose,title:"登录",visible:e.showLogin},on:{"update:visible":function(t){e.showLogin=t}}},[o("el-form",{ref:"validateForm",staticClass:"demo-ruleForm",attrs:{rules:e.rules,model:e.validateForm,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"帐号",prop:"account"}},[o("el-input",{attrs:{type:"account","auto-complete":"off"},model:{value:e.validateForm.account,callback:function(t){e.$set(e.validateForm,"account",t)},expression:"validateForm.account"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"密码",prop:"password"}},[o("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.validateForm.password,callback:function(t){e.$set(e.validateForm,"password",t)},expression:"validateForm.password"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.showLogin=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.login("validateForm")}}},[e._v("登 录")])],1)],1),e._v(" "),o("router-view")],1)},staticRenderFns:[]};var d=o("VU/8")(i,c,!1,function(e){o("teaF")},null,null).exports,u=o("/ocq"),p={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n\thellp\n")])},staticRenderFns:[]};var m=o("VU/8")({name:"HelloWorld",data:function(){return{}},methods:{}},p,!1,function(e){o("t2E5")},"data-v-789d0b58",null).exports,g={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n\thellpxuanxian\n")])},staticRenderFns:[]};var h=o("VU/8")({name:"xuanxian",data:function(){return{}},methods:{}},g,!1,function(e){o("UMNk")},"data-v-16dcf56c",null).exports,f={name:"UserProtocol",data:function(){return{isAdd:!1,protocalData:[],activityList:[],userProtocol:"",protocolDialog:!1,form:{title:"",pubHouse:"",description:"",image:"11"},fileList:[]}},methods:{onChange:function(e,t){console.log(document.querySelector("input[type=file]").files),console.log(t)},beforeUpload:function(e){console.log(e)},addProtocol:function(){this.isAdd=!1;var e=this,t=new URLSearchParams;this.protocolDialog=!1,t.append("userProtocol",this.userProtocol),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addUserProtocol.do",data:t,headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")}}).then(function(t){console.log(t),102==t.data.statusCode?e.getUserProtocol():alert(t.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},resetForm:function(e){this.$refs[e].resetFields()},handleRemove:function(e,t){},handlePreview:function(e){console.log(e)},uploadSuccess:function(e,t,o){4007==e.status&&this.$message.warning(e.msg+",请重传以.png、.jpg、.jpeg为后缀的图片"),console.log(e)},uploadError:function(e,t,o){this.$message.warning("上传失败,请检查网络连接"),console.log(e),console.log(o)},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},getUserProtocol:function(){var e=this;l()({method:"get",dataType:"json",url:"http://47.93.190.186:8080/getUserProtocol.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")}}).then(function(t){if(e.protocalData=[],102==t.data.statusCode){var o=t.data.result;e.protocalData.push(o)}else alert(t.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},handleUpdate:function(e,t){var o=this,a=new URLSearchParams;this.protocolDialog=!1,a.append("userProtocol",this.userProtocol),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/updateUserProtocol.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(e){102==e.data.statusCode?o.getUserProtocol():alert(e.data.message)}).catch(function(e){alert("请检查网络连接")})},handleAdd:function(e,t){console.log(t[e]);var o=new URLSearchParams;o.append("isbn",t[e].isbn),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addBookById.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){102==o.data.statusCode?t[e].stock++:alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})}},mounted:function(){this.getUserProtocol()}},v={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-button",{staticClass:"add",attrs:{size:"mini"},on:{click:function(t){e.protocolDialog=!0,e.isAdd=!0}}},[e._v("新增用户协议")]),e._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.protocalData}},[o("el-table-column",{attrs:{prop:"id",label:"id"}}),e._v(" "),o("el-table-column",{attrs:{prop:"userProtocol",label:"用户协议"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){e.protocolDialog=!0}}},[e._v("更新")]),e._v(" "),o("el-dialog",{attrs:{title:"更新用户协议",visible:e.protocolDialog},on:{"update:visible":function(t){e.protocolDialog=t}}},[o("el-form",[o("el-form-item",{attrs:{label:"用户协议"}},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:15},placeholder:"请填写新的用户协议","auto-complete":"off"},model:{value:e.userProtocol,callback:function(t){e.userProtocol=t},expression:"userProtocol"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.protocolDialog=!1}}},[e._v("取 消")]),e._v(" "),e.isAdd?o("el-button",{attrs:{type:"primary"},on:{click:function(o){e.addProtocol(t.$index,e.protocalData)}}},[e._v("确 定")]):o("el-button",{attrs:{type:"primary"},on:{click:function(o){e.handleUpdate(t.$index,e.protocalData)}}},[e._v("确 定")])],1)],1)]}}])})],1)],1)},staticRenderFns:[]};var b=o("VU/8")(f,v,!1,function(e){o("7YWv")},"data-v-59af9b42",null).exports,w=o("kI9G"),k={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"轮播链接",prop:"pushUrl"}},[o("el-input",{model:{value:e.form.pushUrl,callback:function(t){e.$set(e.form,"pushUrl",t)},expression:"form.pushUrl"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"轮播介绍",prop:"description"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"轮播图",prop:"picture"}},[o("el-upload",{staticClass:"upload-demo",attrs:{"list-type":"picture","on-change":e.onChange,"auto-upload":!1,"before-upload":e.beforeUpload,"on-error":e.uploadError,"on-success":e.uploadSuccess,name:"image",action:"#","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.activityList}},[o("el-tooltip",{attrs:{content:"请上传以.png.jpg.jpeg为后缀的图片(只限一个，多次上传会覆盖)",placement:"top",effect:"light"}},[o("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")])],1)],1)],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit("form")}}},[e._v("添加轮播图")]),e._v(" "),o("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var _=function(e){o("7CdH")},S=o("VU/8")(w.a,k,!1,_,"data-v-b02efb14",null).exports,y=o("gYkm"),x={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{ref:"form",attrs:{rules:e.rules,name:"form",model:e.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"推送链接",prop:"url"}},[o("el-input",{model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"推送标题",prop:"title"}},[o("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"推送图片",prop:"image"}},[o("el-upload",{staticClass:"upload-demo",attrs:{"list-type":"picture","on-change":e.onChange,"auto-upload":!1,"before-upload":e.beforeUpload,"on-error":e.uploadError,"on-success":e.uploadSuccess,name:"image",action:"#","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.activityList}},[o("el-tooltip",{attrs:{content:"请上传以.png.jpg.jpeg为后缀的图片(只限一个，多次上传会覆盖)",placement:"top",effect:"light"}},[o("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")])],1)],1)],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit("form")}}},[e._v("添加推送")]),e._v(" "),o("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var I=function(e){o("ruTL")},C=o("VU/8")(y.a,x,!1,I,"data-v-74f23382",null).exports,D=o("7t+N"),T=o.n(D),B={name:"ManageOrder",data:function(){return{state:"",activeName:"0",orderData:[],activityList:[],rejectReason:"",rejectDialog:!1,currentPage:1,totalSize:0,pageSize:10,selectIndex:0}},methods:{showReject:function(e){this.selectIndex=e,this.rejectDialog=!0},fitOrderState:function(e){var t="";switch(e){case 0:t="待审核";break;case 1:t="待领取";break;case 2:t="审核失败";break;case 3:t="待归还";break;case 4:t="已超期";break;case 5:t="已归还"}return t},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e},handleCurrentChange:function(e){console.log("当前页: "+e),this.getBook(e)},handleClick:function(e,t){console.log(e.name),this.getOrders(e.name)},onChange:function(e,t){console.log(t)},beforeUpload:function(e){console.log(e)},handleRemove:function(e,t){},handlePreview:function(e){console.log(e)},uploadSuccess:function(e,t,o){4007==e.status&&this.$message.warning(e.msg+",请重传以.png、.jpg、.jpeg为后缀的图片"),console.log(e)},uploadError:function(e,t,o){this.$message.warning("上传失败,请检查网络连接"),console.log(e),console.log(o)},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+(t.getMinutes()+":")+t.getSeconds()},addShareBook:function(e,t,o){var a=T()("form[name="+o+"]");console.log(a);var n=new FormData(a[0]);n.append("name",t[e].name),n.append("author",t[e].author),n.append("pubHouse",t[e].pubHouse),n.append("isbn",t[e].bookId),n.append("description",t[e].description),n.append("shareId",t[e].shareId),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addShareBook.do",headers:{"x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:n,cache:!1,processData:!1,contentType:!1}).then(function(o){console.log(o),4005==o.data.statusCode?alert(o.data.message):102==o.data.statusCode?t.splice(e,1):alert(o.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},received:function(e,t){var o=new URLSearchParams;o.append("reservationId",t[e].reservationId),o.append("userId",t[e].userId),o.append("bookId",t[e].bookId),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/reservationBookReceive.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){102==o.data.statusCode?t.splice(e,1):alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})},pass:function(e,t){var o=new URLSearchParams;o.append("reservationId",t[e].reservationId),o.append("result",0),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/check.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){102==o.data.statusCode?t.splice(e,1):alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})},cancel:function(e,t){console.log(e,t);var o=this,a=new URLSearchParams;a.append("reservationId",t[e].reservationId),a.append("result",1),a.append("reason",this.rejectReason),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/check.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(a){o.rejectDialog=!1,102==a.data.statusCode?(t.splice(e,1),o.rejectReason=""):alert(a.data.message)}).catch(function(e){alert("请检查网络连接")})},returnBook:function(e,t){var o=new URLSearchParams;o.append("reservationId",t[e].reservationId),o.append("userId",t[e].userId),o.append("bookId",t[e].bookId),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/reservationBookReturn.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){102==o.data.statusCode?t.splice(e,1):alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})},handleDelete:function(e,t){console.log(t[e]);var o=new URLSearchParams;o.append("isbn",t[e].bookId),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/deleteBook.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(e){e.data.statusCode,alert(e.data.message)}).catch(function(e){alert("请检查网络连接")})},getOrders:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=this;this.isByPhone=!1;var a=new URLSearchParams;a.append("randby",e),a.append("currentPage",t),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/getReservationList.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(e){if(o.orderData=[],102==e.data.statusCode){for(var t=e.data.result.pageData,a=0;a<t.length;a++)t[a].rbBook.bookImg="http://47.93.190.186:8080"+t[a].rbBook.bookImg,t[a].takenDate=o.timestampToTime(t[a].takenDate),t[a].deadline=o.timestampToTime(t[a].deadline),t[a].returnDate=o.timestampToTime(t[a].returnDate),t[a].state=o.fitOrderState(t[a].state),o.orderData.push(t[a]);o.pageSize=e.data.result.pageCount,o.totalSize=e.data.result.totalCount,console.log(o.orderData)}else alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})}},mounted:function(){this.getOrders(0)}},z={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-tabs",{staticStyle:{clear:"both"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"待审核",name:"0"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderData}},[o("el-table-column",{attrs:{prop:"reservationId",label:"订单id"}}),e._v(" "),o("el-table-column",{attrs:{label:"封面"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("img",{attrs:{width:"200px",height:"200px",src:t.row.rbBook.bookImg}}),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[o("img",{attrs:{width:"50px",height:"50px",src:t.row.rbBook.bookImg}})])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"预约书名"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{trigger:"hover",placement:"top"}},[o("p",[e._v("书id: "+e._s(t.row.rbBook.isbn))]),e._v(" "),o("p",[e._v("作者: "+e._s(t.row.rbBook.author))]),e._v(" "),o("p",[e._v("出版社: "+e._s(t.row.rbBook.pubHouse))]),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.row.rbBook.name)+"\n\t\t\t\t\t\t\t")])])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"预约者"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{trigger:"hover",placement:"top"}},[o("p",[e._v("用户id: "+e._s(t.row.userId))]),e._v(" "),o("p",[e._v("学号: "+e._s(t.row.rbUser.stuNum))]),e._v(" "),o("p",[e._v("学院: "+e._s(t.row.rbUser.college))]),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.row.rbUser.name)+"\n\t\t\t\t\t\t\t")])])]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"phone",label:"手机号",width:"140"}}),e._v(" "),o("el-table-column",{attrs:{prop:"takenDate",label:"领取日期",width:"165",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){e.pass(t.$index,e.orderData)}}},[e._v("通过")]),e._v(" "),o("el-button",{attrs:{size:"mini"},on:{click:function(t){e.rejectDialog=!0}}},[e._v("拒绝")]),e._v(" "),o("el-dialog",{attrs:{title:"拒绝理由",visible:e.rejectDialog},on:{"update:visible":function(t){e.rejectDialog=t}}},[o("el-form",[o("el-form-item",{attrs:{label:"拒绝理由"}},[o("el-input",{attrs:{placeholder:"请填写不通过的理由","auto-complete":"off"},model:{value:e.rejectReason,callback:function(t){e.rejectReason=t},expression:"rejectReason"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.rejectDialog=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(o){e.cancel(t.$index,e.orderData)}}},[e._v("确 定")])],1)],1)]}}])})],1)],1),e._v(" "),o("el-tab-pane",{attrs:{label:"待领取",name:"1"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderData}},[o("el-table-column",{attrs:{prop:"reservationId",label:"订单id"}}),e._v(" "),o("el-table-column",{attrs:{label:"封面"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("img",{attrs:{width:"200px",height:"200px",src:t.row.rbBook.bookImg}}),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[o("img",{attrs:{width:"50px",height:"50px",src:t.row.rbBook.bookImg}})])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"预约书名"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{trigger:"hover",placement:"top"}},[o("p",[e._v("书id: "+e._s(t.row.rbBook.isbn))]),e._v(" "),o("p",[e._v("作者: "+e._s(t.row.rbBook.author))]),e._v(" "),o("p",[e._v("出版社: "+e._s(t.row.rbBook.pubHouse))]),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.row.rbBook.name)+"\n\t\t\t\t\t\t\t")])])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"预约者"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{trigger:"hover",placement:"top"}},[o("p",[e._v("用户id: "+e._s(t.row.userId))]),e._v(" "),o("p",[e._v("学号: "+e._s(t.row.rbUser.stuNum))]),e._v(" "),o("p",[e._v("学院: "+e._s(t.row.rbUser.college))]),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.row.rbUser.name)+"\n\t\t\t\t\t\t\t")])])]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"phone",label:"手机号",width:"140"}}),e._v(" "),o("el-table-column",{attrs:{prop:"takenDate",label:"领取日期",width:"165",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){e.received(t.$index,e.orderData)}}},[e._v("已领取")])]}}])})],1)],1),e._v(" "),o("el-tab-pane",{attrs:{label:"未通过",name:"2"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderData}},[o("el-table-column",{attrs:{prop:"reservationId",label:"订单id"}}),e._v(" "),o("el-table-column",{attrs:{label:"封面"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("img",{attrs:{width:"200px",height:"200px",src:t.row.rbBook.bookImg}}),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[o("img",{attrs:{width:"50px",height:"50px",src:t.row.rbBook.bookImg}})])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"预约书名"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{trigger:"hover",placement:"top"}},[o("p",[e._v("书id: "+e._s(t.row.rbBook.isbn))]),e._v(" "),o("p",[e._v("作者: "+e._s(t.row.rbBook.author))]),e._v(" "),o("p",[e._v("出版社: "+e._s(t.row.rbBook.pubHouse))]),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.row.rbBook.name)+"\n\t\t\t\t\t\t\t")])])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"预约者"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{trigger:"hover",placement:"top"}},[o("p",[e._v("用户id: "+e._s(t.row.userId))]),e._v(" "),o("p",[e._v("学号: "+e._s(t.row.rbUser.stuNum))]),e._v(" "),o("p",[e._v("学院: "+e._s(t.row.rbUser.college))]),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.row.rbUser.name)+"\n\t\t\t\t\t\t\t")])])]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"phone",label:"手机号",width:"140"}}),e._v(" "),o("el-table-column",{attrs:{prop:"takenDate",label:"领取日期",width:"165",align:"center"}})],1)],1),e._v(" "),o("el-tab-pane",{attrs:{label:"待归还",name:"3"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderData}},[o("el-table-column",{attrs:{prop:"reservationId",label:"订单id"}}),e._v(" "),o("el-table-column",{attrs:{label:"封面"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("img",{attrs:{width:"200px",height:"200px",src:t.row.rbBook.bookImg}}),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[o("img",{attrs:{width:"50px",height:"50px",src:t.row.rbBook.bookImg}})])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"预约书名"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{trigger:"hover",placement:"top"}},[o("p",[e._v("书id: "+e._s(t.row.rbBook.isbn))]),e._v(" "),o("p",[e._v("作者: "+e._s(t.row.rbBook.author))]),e._v(" "),o("p",[e._v("出版社: "+e._s(t.row.rbBook.pubHouse))]),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.row.rbBook.name)+"\n\t\t\t\t\t\t\t")])])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"预约者"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{trigger:"hover",placement:"top"}},[o("p",[e._v("用户id: "+e._s(t.row.userId))]),e._v(" "),o("p",[e._v("学号: "+e._s(t.row.rbUser.stuNum))]),e._v(" "),o("p",[e._v("学院: "+e._s(t.row.rbUser.college))]),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.row.rbUser.name)+"\n\t\t\t\t\t\t\t")])])]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"phone",label:"手机号",width:"140"}}),e._v(" "),o("el-table-column",{attrs:{prop:"deadline",label:"预订归还日期",width:"165",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{prop:"takenDate",label:"领取日期",width:"165",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){e.returnBook(t.$index,e.orderData)}}},[e._v("确认归还")])]}}])})],1)],1),e._v(" "),o("el-tab-pane",{attrs:{label:"已超期",name:"4"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderData}},[o("el-table-column",{attrs:{prop:"reservationId",label:"订单id"}}),e._v(" "),o("el-table-column",{attrs:{label:"封面"},scopedSlots:e._u([{key:"default",fn:function(e){return[o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[o("img",{attrs:{width:"50px",height:"50px",src:e.row.rbBook.bookImg}})])]}}])},[o("img",{attrs:{width:"200px",height:"200px",src:e.scope.row.rbBook.bookImg}})]),e._v(" "),o("el-table-column",{attrs:{label:"预约书名"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{trigger:"hover",placement:"top"}},[o("p",[e._v("书id: "+e._s(t.row.rbBook.isbn))]),e._v(" "),o("p",[e._v("作者: "+e._s(t.row.rbBook.author))]),e._v(" "),o("p",[e._v("出版社: "+e._s(t.row.rbBook.pubHouse))]),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.row.rbBook.name)+"\n\t\t\t\t\t\t\t")])])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"预约者"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{trigger:"hover",placement:"top"}},[o("p",[e._v("用户id: "+e._s(t.row.userId))]),e._v(" "),o("p",[e._v("学号: "+e._s(t.row.rbUser.stuNum))]),e._v(" "),o("p",[e._v("学院: "+e._s(t.row.rbUser.college))]),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.row.rbUser.name)+"\n\t\t\t\t\t\t\t")])])]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"phone",label:"手机号",width:"140"}}),e._v(" "),o("el-table-column",{attrs:{prop:"deadline",label:"预订归还日期",width:"165",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{prop:"takenDate",label:"领取日期",width:"165",align:"center"}})],1)],1),e._v(" "),o("el-tab-pane",{attrs:{label:"已归还",name:"5"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderData}},[o("el-table-column",{attrs:{prop:"reservationId",label:"订单id"}}),e._v(" "),o("el-table-column",{attrs:{label:"封面"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("img",{attrs:{width:"200px",height:"200px",src:t.row.rbBook.bookImg}}),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[o("img",{attrs:{width:"50px",height:"50px",src:t.row.rbBook.bookImg}})])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"预约书名"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{trigger:"hover",placement:"top"}},[o("p",[e._v("书id: "+e._s(t.row.rbBook.isbn))]),e._v(" "),o("p",[e._v("作者: "+e._s(t.row.rbBook.author))]),e._v(" "),o("p",[e._v("出版社: "+e._s(t.row.rbBook.pubHouse))]),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.row.rbBook.name)+"\n\t\t\t\t\t\t\t")])])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"预约者"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{trigger:"hover",placement:"top"}},[o("p",[e._v("用户id: "+e._s(t.row.userId))]),e._v(" "),o("p",[e._v("学号: "+e._s(t.row.rbUser.stuNum))]),e._v(" "),o("p",[e._v("学院: "+e._s(t.row.rbUser.college))]),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.row.rbUser.name)+"\n\t\t\t\t\t\t\t")])])]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"phone",label:"手机号",width:"140"}}),e._v(" "),o("el-table-column",{attrs:{prop:"deadline",label:"预订归还日期",width:"165",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{prop:"returnDate",label:"归还日期",width:"165",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{prop:"takenDate",label:"领取日期",width:"165",align:"center"}})],1)],1)],1),e._v(" "),o("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var P=o("VU/8")(B,z,!1,function(e){o("TS4W")},"data-v-6572532c",null).exports,R=o("tL5H"),j={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{ref:"form",attrs:{rules:e.rules,name:"form",model:e.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"图书名字",prop:"name"}},[o("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"图书作者",prop:"author"}},[o("el-input",{model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"出版社",prop:"pubHouse"}},[o("el-input",{model:{value:e.form.pubHouse,callback:function(t){e.$set(e.form,"pubHouse",t)},expression:"form.pubHouse"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"图书isbn",prop:"isbn"}},[o("el-input",{attrs:{placeholder:"位于图书背面的一串数字"},model:{value:e.form.isbn,callback:function(t){e.$set(e.form,"isbn",t)},expression:"form.isbn"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"图书供方",prop:"provider"}},[o("el-input",{model:{value:e.form.provider,callback:function(t){e.$set(e.form,"provider",t)},expression:"form.provider"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"图书介绍",prop:"description"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"图书封面",prop:"image"}},[o("el-upload",{staticClass:"upload-demo",attrs:{"list-type":"picture","on-change":e.onChange,"auto-upload":!1,"before-upload":e.beforeUpload,"on-error":e.uploadError,"on-success":e.uploadSuccess,name:"image",action:"#","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.activityList}},[o("el-tooltip",{attrs:{content:"请上传以.png.jpg.jpeg为后缀的图片(只限一个，多次上传会覆盖)",placement:"top",effect:"light"}},[o("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")])],1)],1)],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit("form")}}},[e._v("立即添加")]),e._v(" "),o("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var U=function(e){o("A3e3")},M=o("VU/8")(R.a,j,!1,U,"data-v-65477408",null).exports,$={name:"ManageBook",data:function(){return{bookData:[],currentPage:1,totalSize:0,pageSize:10}},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e},handleCurrentChange:function(e){console.log("当前页: "+e),this.getBook(e)},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+(t.getMinutes()+":")+t.getSeconds()},getBook:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this,o=new URLSearchParams;o.append("randby",1),o.append("currentPage",e),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/getBookList.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(e){if(t.bookData=[],102==e.data.statusCode){var o=e.data.result.pageData;console.log(o);for(var a=0;a<o.length;a++)console.log(o[a].pubDate),o[a].pubDate=t.timestampToTime(o[a].pubDate),o[a].bookImg="http://47.93.190.186:8080"+o[a].bookImg,t.bookData.push(o[a]);t.pageSize=e.data.result.pageCount,t.totalSize=e.data.result.totalCount}else alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},handleDelete:function(e,t){console.log(t[e]);var o=new URLSearchParams;o.append("isbn",t[e].isbn),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/deleteBook.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){102==o.data.statusCode?t[e].stock--:alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})},handleAdd:function(e,t){console.log(t[e]);var o=new URLSearchParams;o.append("isbn",t[e].isbn),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addBookById.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){102==o.data.statusCode?t[e].stock++:alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})}},mounted:function(){this.getBook()}},L={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.bookData}},[o("el-table-column",{attrs:{prop:"isbn",label:"书isbn"}}),e._v(" "),o("el-table-column",{attrs:{label:"封面"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{trigger:"hover",placement:"top"}},[o("p",[e._v(e._s(t.row.name))]),e._v(" "),o("img",{attrs:{width:"200px",height:"200px",src:t.row.bookImg}}),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[o("img",{attrs:{width:"50px",height:"50px",src:t.row.bookImg}})])])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"provider",label:"提供者"}}),e._v(" "),o("el-table-column",{attrs:{prop:"name",label:"书名"}}),e._v(" "),o("el-table-column",{attrs:{prop:"author",label:"作者"}}),e._v(" "),o("el-table-column",{attrs:{prop:"pubHouse",label:"出版社"}}),e._v(" "),o("el-table-column",{attrs:{prop:"pubDate",label:"入库时间",align:"center",width:"160"}}),e._v(" "),o("el-table-column",{attrs:{label:"图书评分"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{trigger:"hover",placement:"top"}},[o("p",[e._v("评分人数: "+e._s(t.row.scoreCnt))]),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[o("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.score))])],1)])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"votes",label:"投票数"}}),e._v(" "),o("el-table-column",{attrs:{prop:"description",label:"书籍简述"}}),e._v(" "),o("el-table-column",{attrs:{label:"库存（含详细信息）"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{trigger:"hover",placement:"top"}},[o("p",[e._v("评论量: "+e._s(t.row.commentCnt))]),e._v(" "),o("p",[e._v("借阅量: "+e._s(t.row.readCnt))]),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[o("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.stock))])],1)])]}}])}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){e.handleAdd(t.$index,e.bookData)}}},[e._v("增数")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){e.handleDelete(t.$index,e.bookData)}}},[e._v("减数")])]}}])})],1),e._v(" "),o("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var H=o("VU/8")($,L,!1,function(e){o("GJf8")},"data-v-439992fe",null).exports,F={name:"SearchShareBook",data:function(){return{phone:"",state:"",activeName:"0",shareData:[],activityList:[],rejectReason:"",rejectDialog:!1,phoneDialog:!1,currentPage4:1,pageSize:10,startNum:0,totalSize:0,isByPhone:!1}},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.isByPhone?this.searchShareBookByPhone(this.startNum,this.pageSize):this.searchShareBookByState(this.activeName,this.startNum,this.pageSize)},handleCurrentChange:function(e){console.log("当前页: "+e),this.startNum=(e-1)*this.pageSize,this.isByPhone?this.searchShareBookByPhone(this.startNum,this.pageSize):this.searchShareBookByState(this.activeName,this.startNum,this.pageSize)},handleClick:function(e,t){console.log(e.name),this.startNum=0,this.currentPage4=1,this.isByPhone||this.searchShareBookByState(e.name),this.isByPhone=!1},onChange:function(e,t){console.log(t)},beforeUpload:function(e){console.log(e)},handleRemove:function(e,t){},handlePreview:function(e){console.log(e)},uploadSuccess:function(e,t,o){4007==e.status&&this.$message.warning(e.msg+",请重传以.doc或.docx为后缀的文件/以.png、.jpg、.jpeg为后缀的图片"),console.log(e)},uploadError:function(e,t,o){this.$message.warning("上传失败,请检查网络连接"),console.log(e),console.log(o)},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+(t.getMinutes()+":")+t.getSeconds()},addShareBook:function(e,t,o){var a=T()("form[name="+o+"]");console.log(a);var n=new FormData(a[0]);n.append("name",t[e].bookName),n.append("author",t[e].author),n.append("pubHouse",t[e].pubHouse),n.append("isbn",t[e].bookId),n.append("description",t[e].description),n.append("shareId",t[e].shareId),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addShareBook.do",data:n,cache:!1,headers:{"x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},processData:!1,contentType:!1}).then(function(o){console.log(o),4005==o.data.statusCode?alert(o.data.message):102==o.data.statusCode?t.splice(e,1):alert(o.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},pass:function(e,t){var o=new URLSearchParams;o.append("shareId",this.shareData[e].shareId),o.append("result",0),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/checkShares.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){102==o.data.statusCode?t.splice(e,1):alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})},cancel:function(e,t){console.log(e,t);var o=this,a=new URLSearchParams;a.append("shareId",this.shareData[e].shareId),a.append("result",1),a.append("reason",this.rejectReason),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/checkShares.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(a){o.rejectDialog=!1,102==a.data.statusCode?(t.splice(e,1),o.rejectReason=""):alert(a.data.message)}).catch(function(e){alert("请检查网络连接")})},handleDelete:function(e,t){console.log(t[e]);var o=new URLSearchParams;o.append("isbn",t[e].bookId),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/deleteBook.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(e){e.data.statusCode,alert(e.data.message)}).catch(function(e){alert("请检查网络连接")})},searchShareBookByPhone:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e5;this.isByPhone=!0,T()("#tab-3").click(),this.shareData.length=0;var o=this,a=new URLSearchParams;a.append("phone",this.phone),a.append("start_num",e),a.append("page_size",t),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/searhShareBookByPhone.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(e){if(o.phoneDialog=!1,0==o.shareData.length)if(102==e.data.statusCode){for(var a=e.data.result,n=0;n<a.length;n++)a[n].delieverWay=0==a[n].delieverWay?"分享者拿书过来":"社团自取分享书",a[n].proposedDate=o.timestampToTime(a[n].proposedDate),o.shareData.push(a[n]);1e5==t&&0==o.startNum&&(o.totalSize=o.shareData.length,o.shareData.length=0,o.searchShareBookByPhone(o.startNum,o.pageSize)),console.log(o.shareData)}else alert(e.data.message)}).catch(function(e){alert("请检查网络连接")})},searchShareBookByState:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e5;this.shareData=[];var a=this;this.isByPhone=!1;var n=new URLSearchParams;n.append("state",e),n.append("start_num",t),n.append("page_size",o),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/searhUserShareBook.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:n}).then(function(e){if(console.log(e),102==e.data.statusCode){for(var t=e.data.result,n=0;n<t.length;n++)t[n].delieverWay=0==t[n].delieverWay?"分享者拿书过来":"社团自取分享书",t[n].proposedDate=a.timestampToTime(t[n].proposedDate),a.shareData.push(t[n]);1e5==o&&0==a.startNum&&(a.totalSize=a.shareData.length,a.searchShareBookByState(a.activeName,a.startNum,a.pageSize))}else alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})}},mounted:function(){this.searchShareBookByState(0)}},N={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-button",{staticStyle:{float:"right","margin-top":"20px"},on:{click:function(t){e.phoneDialog=!0}}},[e._v("手机号查找")]),e._v(" "),o("el-tabs",{staticStyle:{clear:"both"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"待交接",name:"0"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.shareData}},[o("el-table-column",{attrs:{prop:"userId",label:"分享者id"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"phone",label:"手机号",width:"140"}}),e._v(" "),o("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),o("el-table-column",{attrs:{prop:"author",label:"作者"}}),e._v(" "),o("el-table-column",{attrs:{prop:"pubHouse",label:"出版社"}}),e._v(" "),o("el-table-column",{attrs:{prop:"proposedDate",label:"分享日期",width:"160",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{prop:"delieverWay",label:"交接方式"}}),e._v(" "),o("el-table-column",{attrs:{prop:"location",label:"上门领书地点"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){e.pass(t.$index,e.shareData)}}},[e._v("通过")]),e._v(" "),o("el-button",{attrs:{size:"mini"},on:{click:function(t){e.rejectDialog=!0}}},[e._v("取消")]),e._v(" "),o("el-dialog",{attrs:{title:"取消理由",visible:e.rejectDialog},on:{"update:visible":function(t){e.rejectDialog=t}}},[o("el-form",[o("el-form-item",{attrs:{label:"取消理由"}},[o("el-input",{attrs:{placeholder:"请填写不通过的理由","auto-complete":"off"},model:{value:e.rejectReason,callback:function(t){e.rejectReason=t},expression:"rejectReason"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.rejectDialog=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(o){e.cancel(t.$index,e.shareData)}}},[e._v("确 定")])],1)],1)]}}])})],1)],1),e._v(" "),o("el-tab-pane",{attrs:{label:"已取消",name:"1"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.shareData}},[o("el-table-column",{attrs:{prop:"userId",label:"分享者id"}}),e._v(" "),o("el-table-column",{attrs:{prop:"phone",align:"center",width:"140",label:"手机号"}}),e._v(" "),o("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),o("el-table-column",{attrs:{prop:"author",label:"作者"}}),e._v(" "),o("el-table-column",{attrs:{prop:"pubHouse",label:"出版社"}}),e._v(" "),o("el-table-column",{attrs:{prop:"proposedDate",width:"160",align:"center",label:"分享日期"}}),e._v(" "),o("el-table-column",{attrs:{prop:"delieverWay",label:"交接方式"}}),e._v(" "),o("el-table-column",{attrs:{prop:"location",label:"上门领书地点"}})],1)],1),e._v(" "),o("el-tab-pane",{attrs:{label:"已入库",name:"2"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.shareData}},[o("el-table-column",{attrs:{prop:"userId",label:"分享者id"}}),e._v(" "),o("el-table-column",{attrs:{prop:"phone",label:"手机号",width:"140",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),o("el-table-column",{attrs:{prop:"author",label:"作者"}}),e._v(" "),o("el-table-column",{attrs:{prop:"pubHouse",label:"出版社"}}),e._v(" "),o("el-table-column",{attrs:{prop:"proposedDate",label:"分享日期",align:"center",width:"160"}}),e._v(" "),o("el-table-column",{attrs:{prop:"delieverWay",label:"交接方式"}}),e._v(" "),o("el-table-column",{attrs:{prop:"location",label:"上门领书地点"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){e.handleDelete(t.$index,e.shareData)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),o("el-tab-pane",{attrs:{label:"待交书",name:"3"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.shareData}},[o("el-table-column",{attrs:{prop:"userId",label:"分享者id"}}),e._v(" "),o("el-table-column",{attrs:{prop:"phone",label:"手机号",align:"center",width:"140"}}),e._v(" "),o("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),o("el-table-column",{attrs:{prop:"author",label:"作者"}}),e._v(" "),o("el-table-column",{attrs:{prop:"pubHouse",label:"出版社"}}),e._v(" "),o("el-table-column",{attrs:{prop:"proposedDate",label:"分享日期",align:"center",width:"160"}}),e._v(" "),o("el-table-column",{attrs:{prop:"delieverWay",label:"交接方式"}}),e._v(" "),o("el-table-column",{attrs:{prop:"location",label:"上门领书地点"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-form",{ref:"form",attrs:{name:e.shareData[t.$index].shareId}},[o("el-form-item",{attrs:{label:""}},[o("el-upload",{staticClass:"upload-demo",attrs:{"list-type":"picture","on-change":e.onChange,"auto-upload":!1,"before-upload":e.beforeUpload,"on-error":e.uploadError,"on-success":e.uploadSuccess,name:"image",action:"#","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.activityList}},[o("el-tooltip",{attrs:{content:"请上传以.png.jpg.jpeg为后缀的图片(只限一个，多次上传会覆盖)",placement:"top",effect:"light"}},[o("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")])],1)],1)],1),e._v(" "),o("el-form-item",[o("el-input",{attrs:{placeholder:"图书isbn"},model:{value:e.shareData[t.$index].bookId,callback:function(o){e.$set(e.shareData[t.$index],"bookId",o)},expression:"shareData[scope.$index].bookId"}})],1),e._v(" "),o("el-button",{attrs:{size:"mini"},on:{click:function(o){e.addShareBook(t.$index,e.shareData,e.shareData[t.$index].shareId)}}},[e._v("入库")])],1)]}}])})],1)],1)],1),e._v(" "),o("el-pagination",{attrs:{"current-page":e.currentPage4,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),o("el-dialog",{attrs:{title:"手机号查找用户分享书籍",visible:e.phoneDialog},on:{"update:visible":function(t){e.phoneDialog=t}}},[o("el-form",[o("el-form-item",{attrs:{label:"手机号"}},[o("el-input",{attrs:{placeholder:"请填写用户手机号来查找其分享书","auto-complete":"off"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.phoneDialog=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.searchShareBookByPhone()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var q=o("VU/8")(F,N,!1,function(e){o("lFO/")},"data-v-5429fdc6",null).exports,V=o("wOpa"),E={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{ref:"form",attrs:{rules:e.rules,name:"form",model:e.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"图书名字",prop:"title"}},[o("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"图书介绍",prop:"description"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"图书封面",prop:"image"}},[o("el-upload",{staticClass:"upload-demo",attrs:{"list-type":"picture","on-change":e.onChange,"auto-upload":!1,"before-upload":e.beforeUpload,"on-error":e.uploadError,"on-success":e.uploadSuccess,name:"image",action:"#","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.activityList}},[o("el-tooltip",{attrs:{content:"请上传以.png.jpg.jpeg为后缀的图片(只限一个，多次上传会覆盖)",placement:"top",effect:"light"}},[o("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")])],1)],1)],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit("form")}}},[e._v("添加好书")]),e._v(" "),o("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("重置")])],1)],1),e._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.bookData}},[o("el-table-column",{attrs:{prop:"goodbookId",label:"书isbn"}}),e._v(" "),o("el-table-column",{attrs:{label:"封面"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{trigger:"hover",placement:"top"}},[o("p",[e._v(e._s(t.row.name))]),e._v(" "),o("img",{attrs:{width:"200px",height:"200px",src:t.row.picture}}),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[o("img",{attrs:{width:"50px",height:"50px",src:t.row.picture}})])])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"title",label:"书名"}}),e._v(" "),o("el-table-column",{attrs:{prop:"description",label:"书籍简述"}}),e._v(" "),o("el-table-column",{attrs:{prop:"date",label:"入库时间",align:"center",width:"165"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){e.handleDelete(t.$index,e.bookData)}}},[e._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var W=function(e){o("U8ca")},A=o("VU/8")(V.a,E,!1,W,"data-v-c4ce3b4e",null).exports,Y={name:"ManageBookComment",data:function(){return{bookData:[],currentPage:1,totalSize:0,pageSize:10,commentDetail:!1,detailData:[{title:""}]}},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e},handleCurrentChange:function(e){console.log("当前页: "+e),this.getBookComment(e)},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+(t.getMinutes()+":")+t.getSeconds()},getBookComment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this,o=new URLSearchParams;o.append("currentPage",e),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/getPostList.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(e){if(t.bookData=[],102==e.data.statusCode){var o=e.data.result.pageData;console.log(o);for(var a=0;a<o.length;a++)console.log(o[a].pubDate),o[a].pubDate=t.timestampToTime(o[a].pubDate),o[a].isLegal=1==o[a].isLegal?"合法":"非法",o[a].pictures="http://47.93.190.186:8080"+o[a].pictures,t.bookData.push(o[a]);t.pageSize=e.data.result.pageCount,t.totalSize=e.data.result.totalCount}else alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},checkComment:function(e,t){var o=this;console.log(t[e]),this.commentDetail=!0;var a=new URLSearchParams;a.append("commentId",t[e].commentId),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/getComments.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(a){if(o.detailData=[],102==a.data.statusCode){var n=a.data.post.commentList;console.log(n);for(var r=0;r<n.length;r++)n[r].time=o.timestampToTime(n[r].time),n[r].title=t[e].title,o.detailData.push(n[r]);console.log(o.detailData)}else alert(a.data.message)}).catch(function(e){alert("请检查网络连接")})}},mounted:function(){this.getBookComment()}},G={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.bookData}},[o("el-table-column",{attrs:{prop:"bookId",label:"书isbn"}}),e._v(" "),o("el-table-column",{attrs:{label:"封面"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{trigger:"hover",placement:"top"}},[o("img",{attrs:{width:"200px",height:"200px",src:t.row.pictures}}),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[o("img",{attrs:{width:"50px",height:"50px",src:t.row.pictures}})])])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),o("el-table-column",{attrs:{label:"书评者"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{trigger:"hover",placement:"top"}},[o("p",[e._v("评论id: "+e._s(t.row.commentId))]),e._v(" "),o("p",[e._v("书评者id: "+e._s(t.row.userId))]),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v("\n\t\t\t\t\t\t"+e._s(t.row.nickName)+"\n\t\t\t\t\t")])])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"title",label:"书评标题"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",prop:"content",label:"书评内容",width:"200"}}),e._v(" "),o("el-table-column",{attrs:{prop:"commentCnt",label:"评论量"}}),e._v(" "),o("el-table-column",{attrs:{prop:"stars",label:"获赞量"}}),e._v(" "),o("el-table-column",{attrs:{prop:"isLegal",label:"是否合法"}}),e._v(" "),o("el-table-column",{attrs:{prop:"pubDate",label:"入库时间",align:"center",width:"160"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){e.checkComment(t.$index,e.bookData)}}},[e._v("查看书评详情")]),e._v(" "),o("el-dialog",{attrs:{title:"书评标题："+e.detailData[0].title,visible:e.commentDetail},on:{"update:visible":function(t){e.commentDetail=t}}},[o("div",{staticClass:"comments"},e._l(e.detailData,function(t){return o("div",[o("div",{staticClass:"comment"},[o("div",{staticClass:"cavatar"},[o("img",{attrs:{width:"50",height:"50",src:t.fromIdPic}})]),e._v(" "),o("div",{staticClass:"cdetail"},[o("div",{staticClass:"cinfo"},[o("span",{staticClass:"cname"},[e._v(e._s(t.fromName))]),e._v(" "),o("span",[e._v(e._s(0==t.commentType?"评论:":"回复"))]),e._v(" "),o("span",{staticClass:"cname"},[e._v(e._s(1==t.commentType?t.atName+":":""))]),e._v(" "),o("div",{staticClass:"ccontent"},[e._v(e._s(t.ucontent))])]),e._v(" "),o("div",{staticClass:"ctime"},[e._v(e._s(t.time))])])])])})),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.commentDetail=!1}}},[e._v("确 定")])],1)])]}}])})],1),e._v(" "),o("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var O=o("VU/8")(Y,G,!1,function(e){o("OGQa")},"data-v-45c39ab1",null).exports,K={name:"ManageGoodBookComment",data:function(){return{form:{postContent:"",postBookName:"",postAuthor:"",wonderfulPostId:""},rules:{postContent:[{required:!0,message:"请填写已存在的书评",trigger:"blur"}],postBookName:[{required:!0,message:"请填写所评论的书名",trigger:"blur"}],postAuthor:[{required:!0,message:"请填写书评作者",trigger:"blur"}]},bookData:[],currentPage:1,totalSize:0,pageSize:10}},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e},handleCurrentChange:function(e){console.log("当前页: "+e),this.getBook(e)},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+(t.getMinutes()+":")+t.getSeconds()},addGoodComment:function(e){var t=this,o=this,a=new URLSearchParams;a.append("postContent",this.form.postContent),a.append("postBookName",this.form.postBookName),a.append("postAuthor",this.form.postAuthor),""!=this.form.wonderfulPostId&&a.append("wonderfulPostId",this.form.wonderfulPostId),this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;l()({method:"post",dataType:"json",url:""!=t.form.wonderfulPostId?"http://47.93.190.186:8080/updateWonderfulPost.do":"http://47.93.190.186:8080/addWonderfulPost.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(e){102==e.data.statusCode?o.getBookComment(0,10):alert(e.data.message)}).catch(function(e){alert("请检查网络连接")})})},getBookComment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this,o=new URLSearchParams;o.append("currentPage",e),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/getWonderfulPostList.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(e){if(t.bookData=[],102==e.data.statusCode){var o=e.data.result.pageData;console.log(o);for(var a=0;a<o.length;a++)console.log(o[a].pubDate),o[a].postTime=t.timestampToTime(o[a].postTime),o[a].pictures="http://47.93.190.186:8080"+o[a].pictures,t.bookData.push(o[a]);t.pageSize=e.data.result.pageCount,t.totalSize=e.data.result.totalCount}else alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},handleDelete:function(e,t){console.log(t[e]);var o=new URLSearchParams;o.append("wonderfulPostId",t[e].wonderfulPostId),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/deleteWonderfulPost.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){102==o.data.statusCode?t.splice(e,1):alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})},handleAdd:function(e,t){console.log(t[e]);var o=new URLSearchParams;o.append("isbn",t[e].isbn),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addBookById.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){102==o.data.statusCode?t[e].stock++:alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})}},mounted:function(){this.getBookComment()}},J={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{ref:"form",attrs:{rules:e.rules,name:"form",model:e.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"已存在的书评",prop:"postContent"}},[o("el-input",{model:{value:e.form.postContent,callback:function(t){e.$set(e.form,"postContent",t)},expression:"form.postContent"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"所评论的书名",prop:"postBookName"}},[o("el-input",{model:{value:e.form.postBookName,callback:function(t){e.$set(e.form,"postBookName",t)},expression:"form.postBookName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"书评作者",prop:"postAuthor"}},[o("el-input",{model:{value:e.form.postAuthor,callback:function(t){e.$set(e.form,"postAuthor",t)},expression:"form.postAuthor"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"书评id"}},[o("el-input",{attrs:{placeholder:"新增不用填写，若更新现有精彩书评需填写原书评id"},model:{value:e.form.wonderfulPostId,callback:function(t){e.$set(e.form,"wonderfulPostId",t)},expression:"form.wonderfulPostId"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addGoodComment("form")}}},[e._v("新增/更新精彩书评")]),e._v(" "),o("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("重置")])],1)],1),e._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.bookData}},[o("el-table-column",{attrs:{prop:"wonderfulPostId",label:"评论id"}}),e._v(" "),o("el-table-column",{attrs:{prop:"postBookName",label:"书名"}}),e._v(" "),o("el-table-column",{attrs:{prop:"postAuthor",label:"评论者"}}),e._v(" "),o("el-table-column",{attrs:{prop:"postContent",label:"评论内容"}}),e._v(" "),o("el-table-column",{attrs:{prop:"postTime",label:"评论时间",align:"center",width:"160"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){e.handleDelete(t.$index,e.bookData)}}},[e._v("删除")])]}}])})],1),e._v(" "),o("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var Q=o("VU/8")(K,J,!1,function(e){o("lYOl")},"data-v-7074a746",null).exports,X={name:"ManageVote",data:function(){return{bookData:[],activityList:[],form:{bookName:"",author:"",pubHouse:"",voteReason:"",voteBookId:"",image:"11"},rules:{bookName:[{required:!0,message:"请填写图书名字",trigger:"blur"}],author:[{required:!0,message:"请填写图书作者",trigger:"blur"}],pubHouse:[{required:!0,message:"请填写出版社",trigger:"blur"}],voteReason:[{required:!0,message:"请填写推荐投票理由",trigger:"blur"}]},fileList:[]}},methods:{onChange:function(e,t){console.log(document.querySelector("input[type=file]").files),console.log(t)},beforeUpload:function(e){console.log(e)},openVote:function(){l()({method:"get",dataType:"json",url:"http://47.93.190.186:8080/openVote.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")}}).then(function(e){e.data.statusCode,alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},closeVote:function(){l()({method:"get",dataType:"json",url:"http://47.93.190.186:8080/closeVote.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")}}).then(function(e){e.data.statusCode,alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},againVote:function(){l()({method:"get",dataType:"json",url:"http://47.93.190.186:8080/againVote.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")}}).then(function(e){e.data.statusCode,alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},onSubmit:function(e){var t=this,o=this,a=T()("form[name=form]"),n=new FormData(a[0]);n.append("bookName",this.form.bookName),n.append("author",this.form.author),n.append("pubHouse",this.form.pubHouse),n.append("voteReason",this.form.voteReason),""!=this.form.voteBookId&&n.append("voteBookId",this.form.voteBookId),this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;l()({method:"post",dataType:"json",url:""!=t.form.voteBookId?"http://47.93.190.186:8080/updateVoteBook.do":"http://47.93.190.186:8080/addVoteBook.do",data:n,headers:{"x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},cache:!1,processData:!1,contentType:!1}).then(function(e){console.log(e),102==e.data.statusCode?o.getVoteBooks():alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})})},resetForm:function(e){this.$refs[e].resetFields()},handleRemove:function(e,t){},handlePreview:function(e){console.log(e)},uploadSuccess:function(e,t,o){4007==e.status&&this.$message.warning(e.msg+",请重传以.png、.jpg、.jpeg为后缀的图片"),console.log(e)},uploadError:function(e,t,o){this.$message.warning("上传失败,请检查网络连接"),console.log(e),console.log(o)},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},getVoteBooks:function(){var e=this;l()({method:"get",dataType:"json",url:"http://47.93.190.186:8080/getVoteBooks.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")}}).then(function(t){if(e.bookData=[],102==t.data.statusCode){var o=t.data.result;console.log(o);for(var a=0;a<o.length;a++)o[a].bookImg="http://47.93.190.186:8080"+o[a].bookImg,e.bookData.push(o[a])}else alert(t.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},handleDelete:function(e,t){console.log(t[e]);var o=new URLSearchParams;o.append("voteBookId",t[e].voteBookId),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/deleteVoteBook.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){102==o.data.statusCode?t.splice(e,1):alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})},handleAdd:function(e,t){console.log(t[e]);var o=new URLSearchParams;o.append("isbn",t[e].isbn),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addBookById.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){102==o.data.statusCode?t[e].stock++:alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})}},mounted:function(){this.getVoteBooks()}},Z={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{ref:"form",attrs:{rules:e.rules,name:"form",model:e.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"图书名字",prop:"bookName"}},[o("el-input",{model:{value:e.form.bookName,callback:function(t){e.$set(e.form,"bookName",t)},expression:"form.bookName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"作者",prop:"author"}},[o("el-input",{model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"出版社",prop:"pubHouse"}},[o("el-input",{model:{value:e.form.pubHouse,callback:function(t){e.$set(e.form,"pubHouse",t)},expression:"form.pubHouse"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"推荐投票理由",prop:"voteReason"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.form.voteReason,callback:function(t){e.$set(e.form,"voteReason",t)},expression:"form.voteReason"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"图书封面",prop:"image"}},[o("el-upload",{staticClass:"upload-demo",attrs:{"list-type":"picture","on-change":e.onChange,"auto-upload":!1,"before-upload":e.beforeUpload,"on-error":e.uploadError,"on-success":e.uploadSuccess,name:"image",action:"#","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.activityList}},[o("el-tooltip",{attrs:{content:"请上传以.png.jpg.jpeg为后缀的图片(只限一个，多次上传会覆盖)",placement:"top",effect:"light"}},[o("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")])],1)],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"投票书id"}},[o("el-input",{attrs:{placeholder:"新增的不必填，更新已有投票书的时候需填上相应书id"},model:{value:e.form.voteBookId,callback:function(t){e.$set(e.form,"voteBookId",t)},expression:"form.voteBookId"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit("form")}}},[e._v("添加/更新可投票书籍")]),e._v(" "),o("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("重置")]),e._v(" "),o("div",{staticStyle:{float:"right"}},[o("el-button",{on:{click:function(t){e.openVote()}}},[e._v("开启投票通道")]),e._v(" "),o("el-button",{on:{click:function(t){e.closeVote()}}},[e._v("关闭投票通道")]),e._v(" "),o("el-button",{on:{click:function(t){e.againVote()}}},[e._v("重置投票")])],1)],1)],1),e._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.bookData}},[o("el-table-column",{attrs:{prop:"voteBookId",label:"投票书id"}}),e._v(" "),o("el-table-column",{attrs:{label:"封面"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{trigger:"hover",placement:"top"}},[o("p",[e._v(e._s(t.row.bookName))]),e._v(" "),o("img",{attrs:{width:"200px",height:"200px",src:t.row.bookImg}}),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[o("img",{attrs:{width:"50px",height:"50px",src:t.row.bookImg}})])])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),o("el-table-column",{attrs:{prop:"author",label:"作者"}}),e._v(" "),o("el-table-column",{attrs:{prop:"pubHouse",label:"出版社"}}),e._v(" "),o("el-table-column",{attrs:{prop:"voteReason",label:"投票理由"}}),e._v(" "),o("el-table-column",{attrs:{prop:"votes",label:"投票数"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){e.handleDelete(t.$index,e.bookData)}}},[e._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var ee=o("VU/8")(X,Z,!1,function(e){o("unCp")},"data-v-20636ee1",null).exports,te={name:"SearchBook",data:function(){return{bookData:[],currentPage:1,totalSize:0,pageSize:10,searchKey:"",startNum:0}},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.getBook(this.startNum,this.pageSize)},handleCurrentChange:function(e){console.log("当前页: "+e),this.startNum=(e-1)*this.pageSize,this.getBook(this.startNum,this.pageSize)},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+(t.getMinutes()+":")+t.getSeconds()},getBook:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,o=this,a=new URLSearchParams;a.append("key",this.searchKey),a.append("start_num",e),a.append("page_size",t),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/searchBook.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(e){if(o.bookData=[],100==e.data.statusCode){var a=e.data.result;console.log(a);for(var n=0;n<a.length;n++)console.log(a[n].pubDate),a[n].pubDate=o.timestampToTime(a[n].pubDate),a[n].bookImg="http://47.93.190.186:8080"+a[n].bookImg,o.bookData.push(a[n]);1e5==t&&0==o.startNum&&(o.totalSize=o.bookData.length,o.bookData.length=0,o.getBook(o.startNum,o.pageSize))}else alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},handleDelete:function(e,t){console.log(t[e]);var o=new URLSearchParams;o.append("isbn",t[e].isbn),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/deleteBook.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){102==o.data.statusCode?t[e].stock--:alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})},handleAdd:function(e,t){console.log(t[e]);var o=new URLSearchParams;o.append("isbn",t[e].isbn),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addBookById.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){102==o.data.statusCode?t[e].stock++:alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})}},mounted:function(){}},oe={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticStyle:{"text-align":"center"}},[o("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:"请填写想要搜索的书名、作者、出版社"},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}}),e._v(" "),o("el-button",{on:{click:function(t){e.getBook()}}},[e._v("搜索")])],1),e._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.bookData}},[o("el-table-column",{attrs:{prop:"isbn",label:"书isbn"}}),e._v(" "),o("el-table-column",{attrs:{label:"封面"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{trigger:"hover",placement:"top"}},[o("p",[e._v(e._s(t.row.name))]),e._v(" "),o("img",{attrs:{width:"200px",height:"200px",src:t.row.bookImg}}),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[o("img",{attrs:{width:"50px",height:"50px",src:t.row.bookImg}})])])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"provider",label:"提供者"}}),e._v(" "),o("el-table-column",{attrs:{prop:"name",label:"书名"}}),e._v(" "),o("el-table-column",{attrs:{prop:"author",label:"作者"}}),e._v(" "),o("el-table-column",{attrs:{prop:"pubHouse",label:"出版社"}}),e._v(" "),o("el-table-column",{attrs:{prop:"pubDate",label:"入库时间",align:"center",width:"160"}}),e._v(" "),o("el-table-column",{attrs:{label:"图书评分"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{trigger:"hover",placement:"top"}},[o("p",[e._v("评分人数: "+e._s(t.row.scoreCnt))]),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[o("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.score))])],1)])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"votes",label:"投票数"}}),e._v(" "),o("el-table-column",{attrs:{prop:"commentCnt",label:"评论数"}}),e._v(" "),o("el-table-column",{attrs:{prop:"readCnt",label:"阅读量"}}),e._v(" "),o("el-table-column",{attrs:{prop:"stock",label:"库存"}}),e._v(" "),o("el-table-column",{attrs:{prop:"description",label:"书籍简述"}}),e._v(" "),o("el-table-column",{attrs:{label:"库存（含详细信息）"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{trigger:"hover",placement:"top"}},[o("p",[e._v("评论量: "+e._s(t.row.commentCnt))]),e._v(" "),o("p",[e._v("借阅量: "+e._s(t.row.readCnt))]),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[o("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.stock))])],1)])]}}])})],1),e._v(" "),o("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var ae=o("VU/8")(te,oe,!1,function(e){o("v6TX")},"data-v-ac43d7e0",null).exports,ne={name:"ManageHelp",data:function(){return{activityList:[],form:{question:"",answer:""},rules:{question:[{required:!0,message:"请填写问题",trigger:"blur"}],answer:[{required:!0,message:"请填写答案",trigger:"blur"}]},helpData:[]}},methods:{handleDelete:function(e,t){console.log(t[e]);var o=new URLSearchParams;o.append("helpId",t[e].qandaId),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/deleteHelp.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){102==o.data.statusCode?t.splice(e,1):alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})},onSubmit:function(e){var t=this,o=new URLSearchParams;o.append("question",this.form.question),o.append("answer",this.form.answer),this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addHelp.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(e){102==e.data.statusCode?t.getHelps():alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})})},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+(t.getMinutes()+":")+t.getSeconds()},getHelps:function(){var e=this;l()({method:"get",dataType:"json",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},url:"http://47.93.190.186:8080/getHelps.do"}).then(function(t){if(console.log(t),102==t.data.statusCode){e.helpData=[];for(var o=t.data.helps,a=0;a<o.length;a++)o[a].pushDate=e.timestampToTime(o[a].pushDate),e.helpData.push(o[a])}else alert(t.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},resetForm:function(e){this.$refs[e].resetFields()}},mounted:function(){this.getHelps()}},re={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{ref:"form",attrs:{rules:e.rules,name:"form",model:e.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"问题",prop:"question"}},[o("el-input",{model:{value:e.form.question,callback:function(t){e.$set(e.form,"question",t)},expression:"form.question"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"答案",prop:"answer"}},[o("el-input",{model:{value:e.form.answer,callback:function(t){e.$set(e.form,"answer",t)},expression:"form.answer"}})],1),e._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit("form")}}},[e._v("新增")]),e._v(" "),o("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("重置")])],1)],1),e._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.helpData}},[o("el-table-column",{attrs:{prop:"qandaId",label:"id"}}),e._v(" "),o("el-table-column",{attrs:{prop:"question",label:"问题"}}),e._v(" "),o("el-table-column",{attrs:{prop:"answer",label:"答案"}}),e._v(" "),o("el-table-column",{attrs:{prop:"helpfulCnt",label:"帮助量"}}),e._v(" "),o("el-table-column",{attrs:{prop:"pushDate",label:"发布时间",align:"center",width:"160"}}),e._v(" "),o("el-table-column",{attrs:{prop:"isDelete",label:"是否删除"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){e.handleDelete(t.$index,e.helpData)}}},[e._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var se=o("VU/8")(ne,re,!1,function(e){o("8KtS")},"data-v-3de7746e",null).exports,le={name:"CheckFeedbacks",data:function(){return{activityList:[],feedbacksData:[],activeName:"feedback",feedbackResult:"",selectIndex:0,replyDialog:!1,currentPage:1,totalSize:0,pageSize:10}},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e},handleCurrentChange:function(e){console.log("当前页: "+e),this.getBook(e)},showReply:function(e){this.selectIndex=e,this.replyDialog=!0},reply:function(e,t){var o=this;console.log(t[e]);var a=new URLSearchParams;a.append("feedbackId",t[e].feedbackId),a.append("userId",t[e].userId),a.append("feedbackResult",this.feedbackResult),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/dealFeedback.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(e){o.replyDialog=!1,102==e.data.statusCode||alert(e.data.message)}).catch(function(e){alert("请检查网络连接")})},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},getFeedbacks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this,o=new URLSearchParams;o.append("currentPage",e),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/getFeedbackList.do",data:o,headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")}}).then(function(e){if(console.log(e),102==e.data.statusCode){t.feedbacksData=[];for(var o=e.data.result.pageData,a=0;a<o.length;a++)o[a].printscreen="http://47.93.190.186:8080"+o[a].printscreen,o[a].proposedDate=t.timestampToTime(o[a].proposedDate),t.feedbacksData.push(o[a]);t.pageSize=e.data.result.pageCount,t.totalSize=e.data.result.totalCount}else alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},resetForm:function(e){this.$refs[e].resetFields()}},mounted:function(){this.getFeedbacks()}},ie={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.feedbacksData}},[o("el-table-column",{attrs:{label:"封面"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-popover",{attrs:{trigger:"hover",placement:"top"}},[o("p",[e._v("反馈 id: "+e._s(t.row.feedbackId))]),e._v(" "),o("img",{attrs:{width:"200px",height:"200px",src:t.row.printscreen}}),e._v(" "),o("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[o("img",{attrs:{width:"50px",height:"50px",src:t.row.printscreen}})])])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"userId",label:"反馈者id"}}),e._v(" "),o("el-table-column",{attrs:{prop:"title",label:"标题"}}),e._v(" "),o("el-table-column",{attrs:{prop:"detail",label:"反馈内容"}}),e._v(" "),o("el-table-column",{attrs:{prop:"proposedDate",label:"反馈日期",align:"center",width:"165"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){e.showReply(t.$index)}}},[e._v("回复")]),e._v(" "),o("el-dialog",{attrs:{title:"回复意见反馈",visible:e.replyDialog},on:{"update:visible":function(t){e.replyDialog=t}}},[o("el-form",[o("el-form-item",{attrs:{label:"回复内容"}},[o("el-input",{attrs:{placeholder:"请填写","auto-complete":"off"},model:{value:e.feedbackResult,callback:function(t){e.feedbackResult=t},expression:"feedbackResult"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.replyDialog=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.reply(e.selectIndex,e.feedbacksData)}}},[e._v("确 定")])],1)],1)]}}])})],1),e._v(" "),o("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var ce=o("VU/8")(le,ie,!1,function(e){o("7y7/")},"data-v-36b3078c",null).exports,de={name:"CheckReports",data:function(){return{activityList:[],reportsData:[],activeName:"0",feedbackResult:"",currentPage:1,totalSize:0,pageSize:10}},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e},handleCurrentChange:function(e){console.log("当前页: "+e),this.getBook(e)},handleClick:function(e,t){console.log(e,t),this.getReports(1,e.name)},ignore:function(e,t){var o=new URLSearchParams;o.append("reportId",t[e].reportId),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/ignoreReport.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){102==o.data.statusCode?t.splice(e,1):alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})},deleteReports:function(e,t){var o=new URLSearchParams;1==t[e].type&&o.append("uCommentId",t[e].uCommentId),o.append("userId",t[e].userId),0==t[e].type&&o.append("commentId",t[e].commentId),o.append("reportId",t[e].reportId),o.append("type",0==t[e].type?0:1),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/deleteCommentByType.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){102==o.data.statusCode?t.splice(e,1):alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},getReports:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=this,a=new URLSearchParams;a.append("currentPage",e),a.append("isdone",t),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/getReportList.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(e){if(console.log(e),102==e.data.statusCode){o.reportsData=[];for(var t=e.data.result.pageData,a=0;a<t.length;a++)t[a].printscreen="http://47.93.190.186:8080"+t[a].printscreen,t[a].proposedDate=o.timestampToTime(t[a].proposedDate),o.reportsData.push(t[a]);o.pageSize=e.data.result.pageCount,o.totalSize=e.data.result.totalCount,console.log(o.reportsData)}else alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},resetForm:function(e){this.$refs[e].resetFields()}},mounted:function(){this.getReports()}},ue={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"没处理",name:"0"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.reportsData}},[o("el-table-column",{attrs:{prop:"feedbackId",label:"反馈id"}}),e._v(" "),o("el-table-column",{attrs:{prop:"userId",label:"反馈者id"}}),e._v(" "),o("el-table-column",{attrs:{prop:"title",label:"标题"}}),e._v(" "),o("el-table-column",{attrs:{prop:"content",label:"内容"}}),e._v(" "),o("el-table-column",{attrs:{prop:"detail",label:"举报原因"}}),e._v(" "),o("el-table-column",{attrs:{prop:"proposedDate",label:"反馈日期",align:"center",width:"165"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){e.ignore(t.$index,e.reportsData)}}},[e._v("忽略")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){e.deleteReports(t.$index,e.reportsData)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),o("el-tab-pane",{attrs:{label:"已处理",name:"1"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.reportsData}},[o("el-table-column",{attrs:{prop:"feedbackId",label:"反馈id"}}),e._v(" "),o("el-table-column",{attrs:{prop:"userId",label:"反馈者id"}}),e._v(" "),o("el-table-column",{attrs:{prop:"title",label:"标题"}}),e._v(" "),o("el-table-column",{attrs:{prop:"detail",label:"反馈内容"}}),e._v(" "),o("el-table-column",{attrs:{prop:"proposedDate",label:"反馈日期",align:"center",width:"165"}})],1)],1)],1),e._v(" "),o("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var pe=o("VU/8")(de,ue,!1,function(e){o("2jHi")},"data-v-96b27628",null).exports,me={name:"ManageWishBook",data:function(){return{activityList:[],wishBookData:[],activeName:"0",feedbackResult:"",currentPage:1,totalSize:0,pageSize:10}},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e},handleCurrentChange:function(e){console.log("当前页: "+e),this.getBook(e)},handleClick:function(e,t){console.log(e,t),this.getWishBook(1,e.name)},ignore:function(e,t){var o=new URLSearchParams;o.append("wishId",t[e].wishId),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/ignoreWishBook.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){102==o.data.statusCode?t.splice(e,1):alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})},pass:function(e,t){var o=new URLSearchParams;o.append("wishId",t[e].wishId),o.append("userId",t[e].userId),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/storageWishBook.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){102==o.data.statusCode?t.splice(e,1):alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},getWishBook:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=this,a=new URLSearchParams;a.append("currentPage",e),a.append("type",t),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/getWishBookList.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(e){if(console.log(e),102==e.data.statusCode){o.wishBookData=[];for(var t=e.data.result.pageData,a=0;a<t.length;a++)t[a].wishDate=o.timestampToTime(t[a].wishDate),o.wishBookData.push(t[a]);o.pageSize=e.data.result.pageCount,o.totalSize=e.data.result.totalCount,console.log(o.wishBookData)}else alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},resetForm:function(e){this.$refs[e].resetFields()}},mounted:function(){this.getWishBook()}},ge={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"没处理",name:"0"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.wishBookData}},[o("el-table-column",{attrs:{prop:"userId",label:"用户id"}}),e._v(" "),o("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),o("el-table-column",{attrs:{prop:"author",label:"作者"}}),e._v(" "),o("el-table-column",{attrs:{prop:"pubHouse",label:"出版社"}}),e._v(" "),o("el-table-column",{attrs:{prop:"wishId",label:"愿望id"}}),e._v(" "),o("el-table-column",{attrs:{prop:"wishDetail",label:"愿望描述"}}),e._v(" "),o("el-table-column",{attrs:{prop:"wishDate",label:"许愿日期",align:"center",width:"165"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){e.pass(t.$index,e.wishBookData)}}},[e._v("入库")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){e.ignore(t.$index,e.wishBookData)}}},[e._v("忽略")])]}}])})],1)],1),e._v(" "),o("el-tab-pane",{attrs:{label:"已处理",name:"1"}},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.wishBookData}},[o("el-table-column",{attrs:{prop:"userId",label:"用户id"}}),e._v(" "),o("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),o("el-table-column",{attrs:{prop:"author",label:"作者"}}),e._v(" "),o("el-table-column",{attrs:{prop:"pubHouse",label:"出版社"}}),e._v(" "),o("el-table-column",{attrs:{prop:"wishId",label:"愿望id"}}),e._v(" "),o("el-table-column",{attrs:{prop:"wishDetail",label:"愿望描述"}}),e._v(" "),o("el-table-column",{attrs:{prop:"wishDate",label:"许愿日期",align:"center",width:"165"}})],1)],1)],1),e._v(" "),o("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var he=o("VU/8")(me,ge,!1,function(e){o("SP7I")},"data-v-0d9be7e4",null).exports,fe={name:"ManageTimeSlot",data:function(){return{isAdd:!1,selectIndex:0,timeSlotData:[],activityList:[],userProtocol:"",startTime:"",endTime:"",updataTimeSlotDialog:!1,form:{title:"",pubHouse:"",description:"",image:"11"},fileList:[]}},methods:{test:function(e,t){console.log(e),console.log(t[e].slotId)},onChange:function(e,t){console.log(document.querySelector("input[type=file]").files),console.log(t)},beforeUpload:function(e){console.log(e)},showUpdate:function(e){this.selectIndex=e,this.updataTimeSlotDialog=!0},addTimeSlot:function(){this.isAdd=!1;var e=this,t=new URLSearchParams;this.updataTimeSlotDialog=!1,t.append("slotTime",this.startTime+"-"+this.endTime),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addTimeSlot.do",data:t,headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")}}).then(function(t){console.log(t),102==t.data.statusCode?e.getTimeSlots():alert(t.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},resetForm:function(e){this.$refs[e].resetFields()},handleRemove:function(e,t){},handlePreview:function(e){console.log(e)},uploadSuccess:function(e,t,o){4007==e.status&&this.$message.warning(e.msg+",请重传以.png、.jpg、.jpeg为后缀的图片"),console.log(e)},uploadError:function(e,t,o){this.$message.warning("上传失败,请检查网络连接"),console.log(e),console.log(o)},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},handleDelete:function(e,t){console.log(t[e]);var o=new URLSearchParams;o.append("slotId",t[e].slotId),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/deleteTimeSlot.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){102==o.data.statusCode?t.splice(e,1):alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})},getTimeSlots:function(){var e=this;l()({method:"get",dataType:"jsonp",url:"http://47.93.190.186:8080/getTimeSlots.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")}}).then(function(t){if(e.timeSlotData=[],102==t.data.statusCode)for(var o=t.data.result,a=0;a<o.length;a++)e.timeSlotData.push(o[a]);else alert(t.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},handleUpdate:function(e,t){console.log(e);var o=this,a=new URLSearchParams;this.updataTimeSlotDialog=!1,a.append("slotId",t[e].slotId),a.append("slotTime",this.startTime+"-"+this.endTime),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/updateTimeSlot.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(e){102==e.data.statusCode?o.getTimeSlots():alert(e.data.message)}).catch(function(e){alert("请检查网络连接")})},handleAdd:function(e,t){console.log(t[e]);var o=new URLSearchParams;o.append("isbn",t[e].isbn),l()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addBookById.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){102==o.data.statusCode?t[e].stock++:alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})}},mounted:function(){this.getTimeSlots()}},ve={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-button",{staticClass:"add",attrs:{size:"mini"},on:{click:function(t){e.updataTimeSlotDialog=!0,e.isAdd=!0}}},[e._v("增加时间段")]),e._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.timeSlotData}},[o("el-table-column",{attrs:{prop:"slotId",label:"id"}}),e._v(" "),o("el-table-column",{attrs:{prop:"slotTime",label:"预约时间段"}}),e._v(" "),o("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){e.showUpdate(t.$index)}}},[e._v("更新")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){e.handleDelete(t.$index,e.timeSlotData)}}},[e._v("删除")]),e._v(" "),o("el-dialog",{attrs:{title:"更新预约时间段",visible:e.updataTimeSlotDialog},on:{"update:visible":function(t){e.updataTimeSlotDialog=t}}},[o("el-form",[o("el-time-select",{attrs:{placeholder:"起始时间","picker-options":{start:"08:00",step:"00:30",end:"23:00"}},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}}),e._v(" "),o("el-time-select",{attrs:{placeholder:"结束时间","picker-options":{start:"08:00",step:"00:30",end:"23:00",minTime:e.startTime}},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.updataTimeSlotDialog=!1}}},[e._v("取 消")]),e._v(" "),e.isAdd?o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addTimeSlot(e.selectIndex,e.timeSlotData)}}},[e._v("增 加")]):o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleUpdate(e.selectIndex,e.timeSlotData)}}},[e._v("确 定")])],1)],1)]}}])})],1)],1)},staticRenderFns:[]};var be=o("VU/8")(fe,ve,!1,function(e){o("n9HS")},"data-v-5e2225a9",null).exports;a.default.use(u.a);var we=new u.a({routes:[{path:"/hello",name:"HelloWorld",component:m},{path:"/xuanxian",name:"xuanxian",component:h},{path:"/UserProtocol",name:"UserProtocol",component:b},{path:"/Carousel",name:"Carousel",component:S},{path:"/ManagePush",name:"ManagePush",component:C},{path:"/ManageOrder",name:"ManageOrder",component:P},{path:"/AddBook",name:"AddBook",component:M},{path:"/ManageBook",name:"ManageBook",component:H},{path:"/SearchShareBook",name:"SearchShareBook",component:q},{path:"/ManageGoodBooks",name:"ManageGoodBooks",component:A},{path:"/ManageBookComment",name:"ManageBookComment",component:O},{path:"/ManageGoodBookComment",name:"ManageGoodBookComment",component:Q},{path:"/ManageVote",name:"ManageVote",component:ee},{path:"/SearchBook",name:"SearchBook",component:ae},{path:"/ManageHelp",name:"ManageHelp",component:se},{path:"/CheckFeedbacks",name:"CheckFeedbacks",component:ce},{path:"/CheckReports",name:"CheckReports",component:pe},{path:"/ManageWishBook",name:"ManageWishBook",component:he},{path:"/ManageTimeSlot",name:"ManageTimeSlot",component:be}]});a.default.config.productionTip=!1,a.default.use(r.a),new a.default({el:"#app",router:we,components:{App:d},template:"<App/>"})},OGQa:function(e,t){},SP7I:function(e,t){},TS4W:function(e,t){},U8ca:function(e,t){},UMNk:function(e,t){},gYkm:function(e,t,o){"use strict";(function(e){var a=o("mtWM"),n=o.n(a);t.a={name:"ManagePush",data:function(){return{activityList:[],form:{title:"",url:"",image:""},fileList:[],rules:{url:[{required:!0,message:"请填写推送链接",trigger:"blur"}],title:[{required:!0,message:"推送标题",trigger:"blur"}]}}},methods:{onChange:function(e,t){console.log(document.querySelector("input[type=file]").files),console.log(t)},beforeUpload:function(e){console.log(e)},onSubmit:function(t){var o=e("form[name=form]"),a=new FormData(o[0]);a.append("url",this.form.url),a.append("title",this.form.title),this.$refs[t].validate(function(e){if(!e)return console.log("error submit!!"),!1;n()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addPush.do",headers:{"x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a,cache:!1,processData:!1,contentType:!1}).then(function(e){console.log(e),e.data.statusCode,alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})})},resetForm:function(e){this.$refs[e].resetFields()},handleRemove:function(e,t){},handlePreview:function(e){console.log(e)},uploadSuccess:function(e,t,o){4007==e.status&&this.$message.warning(e.msg+",请重传以.png、.jpg、.jpeg为后缀的图片"),console.log(e)},uploadError:function(e,t,o){this.$message.warning("上传失败,请检查网络连接"),console.log(e),console.log(o)}},mounted:function(){}}}).call(t,o("7t+N"))},kI9G:function(e,t,o){"use strict";(function(e){var a=o("mtWM"),n=o.n(a);t.a={name:"Carousel",data:function(){return{activityList:[],form:{description:"",pushUrl:"",picture:""},rules:{description:[{required:!0,message:"请填写轮播图介绍",trigger:"blur"}],pushUrl:[{required:!0,message:"轮播图链接",trigger:"blur"}]},fileList:[]}},methods:{onChange:function(e,t){console.log(document.querySelector("input[type=file]").files),console.log(t)},beforeUpload:function(e){console.log(e)},onSubmit:function(t){var o=e("form[name=form]"),a=new FormData(o[0]);a.append("pushUrl",this.form.pushUrl),a.append("description",this.form.description),this.$refs[t].validate(function(e){if(!e)return console.log("error submit!!"),!1;n()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addCarousel.do",data:a,headers:{"Content-Type":"multipart/form-data; boundary=----WebKitFormBoundaryZN8L8IJgRBAp5pTW","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},cache:!1,processData:!1,contentType:!1}).then(function(e){console.log(e),e.data.statusCode,alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})})},resetForm:function(e){this.$refs[e].resetFields()},handleRemove:function(e,t){},handlePreview:function(e){console.log(e)},uploadSuccess:function(e,t,o){4007==e.status&&this.$message.warning(e.msg+",请重传以.png、.jpg、.jpeg为后缀的图片"),console.log(e)},uploadError:function(e,t,o){this.$message.warning("上传失败,请检查网络连接"),console.log(e),console.log(o)}},mounted:function(){}}}).call(t,o("7t+N"))},"lFO/":function(e,t){},lYOl:function(e,t){},n9HS:function(e,t){},ruTL:function(e,t){},t2E5:function(e,t){},tL5H:function(e,t,o){"use strict";(function(e){var a=o("mtWM"),n=o.n(a);t.a={name:"AddBook",data:function(){return{activityList:[],form:{name:"",author:"",pubHouse:"",isbn:"",description:"",provider:"荔进社",image:"11"},rules:{name:[{required:!0,message:"请填写图书名字",trigger:"blur"}],author:[{required:!0,message:"请填写图书作者",trigger:"blur"}],pubHouse:[{required:!0,message:"请填写出版社",trigger:"blur"}],isbn:[{required:!0,message:"请填写图书isbn",trigger:"blur"}],description:[{required:!0,message:"请填写图书介绍",trigger:"blur"}],provider:[{required:!0,message:"请填写提供方",trigger:"blur"}]},fileList:[]}},methods:{onChange:function(e,t){console.log(document.querySelector("input[type=file]").files),console.log(t),this.form.image=e.url},beforeUpload:function(e){console.log(e)},onSubmit:function(t){var o=e("form[name=form]"),a=new FormData(o[0]);a.append("name",this.form.name),a.append("author",this.form.author),a.append("pubHouse",this.form.pubHouse),a.append("isbn",this.form.isbn),a.append("description",this.form.description),a.append("provider",this.form.provider),this.$refs[t].validate(function(e){if(!e)return console.log("error submit!!"),!1;n()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addBook.do",headers:{"x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a,cache:!1,processData:!1,contentType:!1}).then(function(e){console.log(e),4005==e.data.statusCode?alert(e.data.message):(e.data.statusCode,alert(e.data.message))}).catch(function(e){console.log(e),alert("请检查网络连接")})})},resetForm:function(e){this.$refs[e].resetFields()},handleRemove:function(e,t){},handlePreview:function(e){console.log(e)},uploadSuccess:function(e,t,o){4007==e.status&&this.$message.warning(e.msg+",请重传以.png、.jpg、.jpeg为后缀的图片"),console.log(e)},uploadError:function(e,t,o){this.$message.warning("上传失败,请检查网络连接"),console.log(e),console.log(o)}},mounted:function(){}}}).call(t,o("7t+N"))},teaF:function(e,t){},tvR6:function(e,t){},unCp:function(e,t){},v6TX:function(e,t){},wOpa:function(e,t,o){"use strict";(function(e){var a=o("mtWM"),n=o.n(a);t.a={name:"ManageGoodBooks",data:function(){return{bookData:[],activityList:[],form:{title:"",description:"",image:"11"},rules:{title:[{required:!0,message:"请填写图书名字",trigger:"blur"}],description:[{required:!0,message:"请填写图书介绍",trigger:"blur"}]},fileList:[]}},methods:{onChange:function(e,t){console.log(document.querySelector("input[type=file]").files),console.log(t)},beforeUpload:function(e){console.log(e)},onSubmit:function(t){var o=this,a=e("form[name=form]"),r=new FormData(a[0]);r.append("title",this.form.title),r.append("description",this.form.description),this.$refs[t].validate(function(e){if(!e)return console.log("error submit!!"),!1;n()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addGoodBook.do",headers:{"x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:r,cache:!1,processData:!1,contentType:!1}).then(function(e){console.log(e),102==e.data.statusCode?o.getBook():alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})})},resetForm:function(e){this.$refs[e].resetFields()},handleRemove:function(e,t){},handlePreview:function(e){console.log(e)},uploadSuccess:function(e,t,o){4007==e.status&&this.$message.warning(e.msg+",请重传以.png、.jpg、.jpeg为后缀的图片"),console.log(e)},uploadError:function(e,t,o){this.$message.warning("上传失败,请检查网络连接"),console.log(e),console.log(o)},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},getBook:function(){var e=this;n()({method:"get",dataType:"json",url:"http://47.93.190.186:8080/getGoodBooks.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")}}).then(function(t){if(e.bookData=[],102==t.data.statusCode){var o=t.data.books;console.log(o);for(var a=0;a<o.length;a++)console.log(o[a].pubDate),o[a].date=e.timestampToTime(o[a].date),o[a].picture="http://47.93.190.186:8080"+o[a].picture,e.bookData.push(o[a])}else alert(t.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},handleDelete:function(e,t){console.log(t[e]);var o=new URLSearchParams;o.append("goodBookId",t[e].goodbookId),n()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/deleteGoodBook.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){102==o.data.statusCode?t.splice(e,1):alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})},handleAdd:function(e,t){console.log(t[e]);var o=new URLSearchParams;o.append("isbn",t[e].isbn),n()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addBookById.do",headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){102==o.data.statusCode?t[e].stock++:alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})}},mounted:function(){this.getBook()}}}).call(t,o("7t+N"))}},["NHnr"]);
//# sourceMappingURL=app.de67d7fb053413499f37.js.map