webpackJsonp([1],{"0+Qm":function(e,t){},"5OYY":function(e,t){},"95Hn":function(e,t){},DSEp:function(e,t){},F2QV:function(e,t){},JXwx:function(e,t){},JaYc:function(e,t){},LJnt:function(e,t){},N4Vv:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("7+uW"),n=a("zL8q"),l=a.n(n),r=(a("tvR6"),a("mtWM")),s=a.n(r),i={name:"App",data:function(){return{activeIndex:"1",showLogin:!1,isLogin:"true"==window.sessionStorage.getItem("isLogin"),validateForm:{account:"",password:""},rules:{account:[{required:!0,message:"请选择",trigger:"blur"}],password:[{required:!0,message:"请选择",trigger:"blur"}]}}},methods:{handleSelect:function(e,t){console.log(e,t)},login:function(e){var t=this,a=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;var o=new URLSearchParams;o.append("username",t.validateForm.account),o.append("password",t.validateForm.password),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/admin/login.do",header:{"Content-Type":"application/x-www-form-urlencoded"},data:o}).then(function(e){console.log(e),4005==e.data.statusCode?alert(e.data.message):102==e.data.statusCode?(window.sessionStorage.setItem("adminId",e.data.result.adminId),window.sessionStorage.setItem("token",e.data.result.token),window.sessionStorage.setItem("isLogin",!0),a.isLogin=!0,a.showLogin=!1):alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})})},logout:function(e){var t=this;s()({method:"get",dataType:"json",url:"http://47.93.190.186:8080/logout.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")}}).then(function(e){console.log(e),4005==e.data.statusCode?alert(e.data.message):102==e.data.statusCode?(t.isLogin=!1,window.sessionStorage.setItem("isLogin",!1),alert("成功退出登录")):alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},handleClose:function(e){e()}},mounted:function(){console.log(this.isLogin)}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":e.activeIndex,mode:"horizontal"},on:{select:e.handleSelect}},[a("el-menu-item",{attrs:{index:"1"}},[a("router-link",{staticClass:"router",attrs:{to:"/UserProtocol"}},[e._v("用户协议")])],1),e._v(" "),a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[e._v("关于社团")]),e._v(" "),a("el-menu-item",{attrs:{index:"2-1"}},[a("router-link",{staticClass:"router",attrs:{to:"/Carousel"}},[e._v("管理轮播图")])],1),e._v(" "),a("el-menu-item",{attrs:{index:"2-2"}},[a("router-link",{staticClass:"router",attrs:{to:"/ManagePush"}},[e._v("管理推送")])],1)],2),e._v(" "),a("el-submenu",{attrs:{index:"3"}},[a("template",{slot:"title"},[e._v("审核预约数据")]),e._v(" "),a("el-menu-item",{attrs:{index:"3-1"}},[a("router-link",{staticClass:"router",attrs:{to:"/ManageOrder"}},[e._v("管理预约数据")])],1)],2),e._v(" "),a("el-submenu",{attrs:{index:"5"}},[a("template",{slot:"title"},[e._v("意见反馈与帮助")]),e._v(" "),a("el-menu-item",{attrs:{index:"5-1"}},[a("router-link",{staticClass:"router",attrs:{to:"/CheckFeedbacks"}},[e._v("查看意见反馈")])],1),e._v(" "),a("el-menu-item",{attrs:{index:"5-2"}},[a("router-link",{staticClass:"router",attrs:{to:"/CheckReports"}},[e._v("查看举报")])],1),e._v(" "),a("el-menu-item",{attrs:{index:"5-3"}},[a("router-link",{staticClass:"router",attrs:{to:"/ManageHelp"}},[e._v("管理帮助项")])],1)],2),e._v(" "),a("el-submenu",{attrs:{index:"6"}},[a("template",{slot:"title"},[e._v("维护书库")]),e._v(" "),a("el-menu-item",{attrs:{index:"6-1"}},[a("router-link",{staticClass:"router",attrs:{to:"/AddBook"}},[e._v("添加新书")])],1),e._v(" "),a("el-menu-item",{attrs:{index:"6-2"}},[a("router-link",{staticClass:"router",attrs:{to:"/ManageBook"}},[e._v("管理书库")])],1),e._v(" "),a("el-menu-item",{attrs:{index:"6-3"}},[a("router-link",{staticClass:"router",attrs:{to:"/SearchShareBook"}},[e._v("管理分享书籍")])],1),e._v(" "),a("el-menu-item",{attrs:{index:"6-4"}},[a("router-link",{staticClass:"router",attrs:{to:"/ManageGoodBooks"}},[e._v("管理好书")])],1),e._v(" "),a("el-menu-item",{attrs:{index:"6-5"}},[a("router-link",{staticClass:"router",attrs:{to:"/ManageBookComment"}},[e._v("管理书评")])],1),e._v(" "),a("el-menu-item",{attrs:{index:"6-6"}},[a("router-link",{staticClass:"router",attrs:{to:"/ManageGoodBookComment"}},[e._v("管理精彩书评")])],1),e._v(" "),a("el-menu-item",{attrs:{index:"6-7"}},[a("router-link",{staticClass:"router",attrs:{to:"/ManageVote"}},[e._v("管理投票")])],1)],2),e._v(" "),a("el-submenu",{attrs:{index:"7"}},[a("template",{slot:"title"},[e._v("【社区】")]),e._v(" "),a("el-menu-item",{attrs:{index:"7-1"}},[a("router-link",{staticClass:"router",attrs:{to:"/ManageWishBook"}},[e._v("管理愿望书单")])],1)],2),e._v(" "),a("el-menu-item",{attrs:{index:"4"}},[a("router-link",{staticClass:"router",attrs:{to:"/ManageTimeSlot"}},[e._v("管理预约时间地点")])],1),e._v(" "),e.isLogin?a("el-menu-item",{attrs:{index:"8"},on:{click:e.logout}},[e._v("\n\t\t\t\t退出登录\n\t\t\t")]):a("el-menu-item",{attrs:{index:"8"},on:{click:function(t){e.showLogin=!0}}},[e._v("\n\t\t\t\t登录\n\t\t\t")])],1),e._v(" "),a("el-dialog",{attrs:{"before-close":e.handleClose,title:"登录",visible:e.showLogin},on:{"update:visible":function(t){e.showLogin=t}}},[a("el-form",{ref:"validateForm",staticClass:"demo-ruleForm",attrs:{rules:e.rules,model:e.validateForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"帐号",prop:"account"}},[a("el-input",{attrs:{type:"account","auto-complete":"off"},model:{value:e.validateForm.account,callback:function(t){e.$set(e.validateForm,"account",t)},expression:"validateForm.account"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.validateForm.password,callback:function(t){e.$set(e.validateForm,"password",t)},expression:"validateForm.password"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.showLogin=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.login("validateForm")}}},[e._v("登 录")])],1)],1),e._v(" "),a("router-view")],1)},staticRenderFns:[]};var d=a("VU/8")(i,c,!1,function(e){a("LJnt")},null,null).exports,u=a("/ocq"),p={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n\thellp\n")])},staticRenderFns:[]};var m=a("VU/8")({name:"HelloWorld",data:function(){return{}},methods:{}},p,!1,function(e){a("t2E5")},"data-v-789d0b58",null).exports,g={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._v("\n\thellpxuanxian\n")])},staticRenderFns:[]};var h=a("VU/8")({name:"xuanxian",data:function(){return{}},methods:{}},g,!1,function(e){a("UMNk")},"data-v-16dcf56c",null).exports,f={name:"UserProtocol",data:function(){return{isAdd:!1,protocalData:[],activityList:[],userProtocol:"",protocolDialog:!1,form:{title:"",pubHouse:"",description:"",image:"11"},fileList:[]}},methods:{onChange:function(e,t){console.log(document.querySelector("input[type=file]").files),console.log(t)},beforeUpload:function(e){console.log(e)},addProtocol:function(){this.isAdd=!1;var e=this,t=new URLSearchParams;this.protocolDialog=!1,t.append("userProtocol",this.userProtocol),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addUserProtocol.do",data:t}).then(function(t){console.log(t),102==t.data.statusCode?e.getUserProtocol():alert(t.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},resetForm:function(e){this.$refs[e].resetFields()},handleRemove:function(e,t){},handlePreview:function(e){console.log(e)},uploadSuccess:function(e,t,a){4007==e.status&&this.$message.warning(e.msg+",请重传以.png、.jpg、.jpeg为后缀的图片"),console.log(e)},uploadError:function(e,t,a){this.$message.warning("上传失败,请检查网络连接"),console.log(e),console.log(a)},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},getUserProtocol:function(){var e=this;s()({method:"get",dataType:"jsonp",url:"http://47.93.190.186:8080/getUserProtocol.do"}).then(function(t){if(e.protocalData=[],102==t.data.statusCode){var a=t.data.result;e.protocalData.push(a)}else alert(t.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},handleUpdate:function(e,t){var a=this,o=new URLSearchParams;this.protocolDialog=!1,o.append("userProtocol",this.userProtocol),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/updateUserProtocol.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(e){102==e.data.statusCode?a.getUserProtocol():alert(e.data.message)}).catch(function(e){alert("请检查网络连接")})},handleAdd:function(e,t){console.log(t[e]);var a=new URLSearchParams;a.append("isbn",t[e].isbn),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addBookById.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(a){102==a.data.statusCode?t[e].stock++:alert(a.data.message)}).catch(function(e){alert("请检查网络连接")})}},mounted:function(){this.getUserProtocol()}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{staticClass:"add",attrs:{size:"mini"},on:{click:function(t){e.protocolDialog=!0,e.isAdd=!0}}},[e._v("新增用户协议")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.protocalData}},[a("el-table-column",{attrs:{prop:"id",label:"id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userProtocol",label:"用户协议"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(t){e.protocolDialog=!0}}},[e._v("更新")]),e._v(" "),a("el-dialog",{attrs:{title:"更新用户协议",visible:e.protocolDialog},on:{"update:visible":function(t){e.protocolDialog=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"用户协议"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:15},placeholder:"请填写新的用户协议","auto-complete":"off"},model:{value:e.userProtocol,callback:function(t){e.userProtocol=t},expression:"userProtocol"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.protocolDialog=!1}}},[e._v("取 消")]),e._v(" "),e.isAdd?a("el-button",{attrs:{type:"primary"},on:{click:function(a){e.addProtocol(t.$index,e.protocalData)}}},[e._v("确 定")]):a("el-button",{attrs:{type:"primary"},on:{click:function(a){e.handleUpdate(t.$index,e.protocalData)}}},[e._v("确 定")])],1)],1)]}}])})],1)],1)},staticRenderFns:[]};var b=a("VU/8")(f,v,!1,function(e){a("0+Qm")},"data-v-34a7df1e",null).exports,w=a("kI9G"),_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{name:"form",model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"推送链接"}},[a("el-input",{model:{value:e.form.pushUrl,callback:function(t){e.$set(e.form,"pushUrl",t)},expression:"form.pushUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图书介绍"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图片",prop:"picture"}},[a("el-upload",{staticClass:"upload-demo",attrs:{"list-type":"picture","on-change":e.onChange,"auto-upload":!1,"before-upload":e.beforeUpload,"on-error":e.uploadError,"on-success":e.uploadSuccess,name:"image",action:"#","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.activityList}},[a("el-tooltip",{attrs:{content:"请上传以.png.jpg.jpeg为后缀的图片(只限一个，多次上传会覆盖)",placement:"top",effect:"light"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")])],1)],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit()}}},[e._v("立即添加")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var k=function(e){a("JaYc")},S=a("VU/8")(w.a,_,!1,k,"data-v-116d0af4",null).exports,y=a("gYkm"),D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{name:"form",model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"推送链接"}},[a("el-input",{model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"推送标题"}},[a("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图片",prop:"image"}},[a("el-upload",{staticClass:"upload-demo",attrs:{"list-type":"picture","on-change":e.onChange,"auto-upload":!1,"before-upload":e.beforeUpload,"on-error":e.uploadError,"on-success":e.uploadSuccess,name:"image",action:"#","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.activityList}},[a("el-tooltip",{attrs:{content:"请上传以.png.jpg.jpeg为后缀的图片(只限一个，多次上传会覆盖)",placement:"top",effect:"light"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")])],1)],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit()}}},[e._v("立即添加")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var C=function(e){a("DSEp")},x=a("VU/8")(y.a,D,!1,C,"data-v-572e3c42",null).exports,I=a("7t+N"),T=a.n(I),z={name:"ManageOrder",data:function(){return{state:"",activeName:"0",orderData:[],activityList:[],rejectReason:"",rejectDialog:!1,currentPage:1,totalSize:0,pageSize:10}},methods:{fitOrderState:function(e){var t="";switch(e){case 0:t="待审核";break;case 1:t="待领取";break;case 2:t="审核失败";break;case 3:t="待归还";break;case 4:t="已超期";break;case 5:t="已归还"}return t},handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e},handleCurrentChange:function(e){console.log("当前页: "+e),this.getBook(e)},handleClick:function(e,t){console.log(e.name),this.getOrders(e.name)},onChange:function(e,t){console.log(t)},beforeUpload:function(e){console.log(e)},handleRemove:function(e,t){},handlePreview:function(e){console.log(e)},uploadSuccess:function(e,t,a){4007==e.status&&this.$message.warning(e.msg+",请重传以.png、.jpg、.jpeg为后缀的图片"),console.log(e)},uploadError:function(e,t,a){this.$message.warning("上传失败,请检查网络连接"),console.log(e),console.log(a)},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+(t.getMinutes()+":")+t.getSeconds()},addShareBook:function(e,t,a){var o=T()("form[name="+a+"]");console.log(o);var n=new FormData(o[0]);n.append("name",t[e].name),n.append("author",t[e].author),n.append("pubHouse",t[e].pubHouse),n.append("isbn",t[e].bookId),n.append("description",t[e].description),n.append("shareId",t[e].shareId),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addShareBook.do",data:n,cache:!1,processData:!1,contentType:!1}).then(function(a){console.log(a),4005==a.data.statusCode?alert(a.data.message):102==a.data.statusCode?t.splice(e,1):alert(a.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},received:function(e,t){var a=new URLSearchParams;a.append("reservationId",t[e].reservationId),a.append("userId",t[e].userId),a.append("bookId",t[e].bookId),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/reservationBookReceive.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(a){102==a.data.statusCode?t.splice(e,1):alert(a.data.message)}).catch(function(e){alert("请检查网络连接")})},pass:function(e,t){var a=new URLSearchParams;a.append("shareId",this.orderData[e].shareId),a.append("result",0),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/checkShares.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(a){102==a.data.statusCode?t.splice(e,1):alert(a.data.message)}).catch(function(e){alert("请检查网络连接")})},cancel:function(e,t){console.log(e,t);var a=this,o=new URLSearchParams;o.append("shareId",this.orderData[e].shareId),o.append("result",1),o.append("reason",this.rejectReason),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/checkShares.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){a.rejectDialog=!1,102==o.data.statusCode?(t.splice(e,1),a.rejectReason=""):alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})},handleDelete:function(e,t){console.log(t[e]);var a=new URLSearchParams;a.append("isbn",t[e].bookId),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/deleteBook.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(e){e.data.statusCode,alert(e.data.message)}).catch(function(e){alert("请检查网络连接")})},getOrders:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.orderData=[];var a=this;this.isByPhone=!1;var o=new URLSearchParams;o.append("randby",e),o.append("currentPage",t),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/getReservationList.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(e){if(console.log(e),102==e.data.statusCode){for(var t=e.data.result.pageData,o=0;o<t.length;o++)t[o].takenDate=a.timestampToTime(t[o].takenDate),t[o].deadline=a.timestampToTime(t[o].deadline),t[o].returnDate=a.timestampToTime(t[o].returnDate),t[o].state=a.fitOrderState(t[o].state),a.orderData.push(t[o]);a.pageSize=e.data.result.pageCount,a.totalSize=e.data.result.totalCount,console.log(a.orderData)}else alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})}},mounted:function(){this.getOrders(0)}},B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{staticStyle:{clear:"both"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"所有",name:"0"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderData}},[a("el-table-column",{attrs:{prop:"userId",label:"分享者id"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"phone",label:"手机号",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{label:"订单状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("订单id: "+e._s(t.row.reservationId))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.state))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"书"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("书id: "+e._s(t.row.bookId))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.rbBook))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"deadline",label:"预定归还日期",width:"165",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"returnDate",label:"归还日期",width:"165",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"takenDate",label:"领取日期",width:"165",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.pass(t.$index,e.orderData)}}},[e._v("通过")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.rejectDialog=!0}}},[e._v("取消")]),e._v(" "),a("el-dialog",{attrs:{title:"取消理由",visible:e.rejectDialog},on:{"update:visible":function(t){e.rejectDialog=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"取消理由"}},[a("el-input",{attrs:{placeholder:"请填写不通过的理由","auto-complete":"off"},model:{value:e.rejectReason,callback:function(t){e.rejectReason=t},expression:"rejectReason"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.rejectDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){e.cancel(t.$index,e.orderData)}}},[e._v("确 定")])],1)],1)]}}])})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"待领取",name:"1"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderData}},[a("el-table-column",{attrs:{prop:"userId",label:"分享者id"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"phone",label:"手机号",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{label:"订单状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("订单id: "+e._s(t.row.reservationId))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.state))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"书"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("书id: "+e._s(t.row.bookId))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.rbBook))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"deadline",label:"预定归还日期",width:"165",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"returnDate",label:"归还日期",width:"165",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"takenDate",label:"领取日期",width:"165",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.received(t.$index,e.orderData)}}},[e._v("已领取")])]}}])})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"未通过",name:"2"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderData}},[a("el-table-column",{attrs:{prop:"userId",label:"分享者id"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"phone",label:"手机号",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{label:"订单状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("订单id: "+e._s(t.row.reservationId))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.state))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"书"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("书id: "+e._s(t.row.bookId))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.rbBook))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"deadline",label:"预定归还日期",width:"165",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"returnDate",label:"归还日期",width:"165",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"takenDate",label:"领取日期",width:"165",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.pass(t.$index,e.orderData)}}},[e._v("通过")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.rejectDialog=!0}}},[e._v("取消")]),e._v(" "),a("el-dialog",{attrs:{title:"取消理由",visible:e.rejectDialog},on:{"update:visible":function(t){e.rejectDialog=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"取消理由"}},[a("el-input",{attrs:{placeholder:"请填写不通过的理由","auto-complete":"off"},model:{value:e.rejectReason,callback:function(t){e.rejectReason=t},expression:"rejectReason"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.rejectDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){e.cancel(t.$index,e.orderData)}}},[e._v("确 定")])],1)],1)]}}])})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"超期",name:"3"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderData}},[a("el-table-column",{attrs:{prop:"userId",label:"分享者id"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"phone",label:"手机号",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{label:"订单状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("订单id: "+e._s(t.row.reservationId))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.state))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"书"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("书id: "+e._s(t.row.bookId))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.rbBook))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"deadline",label:"预定归还日期",width:"165",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"returnDate",label:"归还日期",width:"165",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"takenDate",label:"领取日期",width:"165",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.pass(t.$index,e.orderData)}}},[e._v("通过")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.rejectDialog=!0}}},[e._v("取消")]),e._v(" "),a("el-dialog",{attrs:{title:"取消理由",visible:e.rejectDialog},on:{"update:visible":function(t){e.rejectDialog=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"取消理由"}},[a("el-input",{attrs:{placeholder:"请填写不通过的理由","auto-complete":"off"},model:{value:e.rejectReason,callback:function(t){e.rejectReason=t},expression:"rejectReason"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.rejectDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){e.cancel(t.$index,e.orderData)}}},[e._v("确 定")])],1)],1)]}}])})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"已归还",name:"4"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderData}},[a("el-table-column",{attrs:{prop:"userId",label:"分享者id"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"phone",label:"手机号",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{label:"订单状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("订单id: "+e._s(t.row.reservationId))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.state))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"书"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("书id: "+e._s(t.row.bookId))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.rbBook))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"deadline",label:"预定归还日期",width:"165",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"returnDate",label:"归还日期",width:"165",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"takenDate",label:"领取日期",width:"165",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.pass(t.$index,e.orderData)}}},[e._v("通过")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.rejectDialog=!0}}},[e._v("取消")]),e._v(" "),a("el-dialog",{attrs:{title:"取消理由",visible:e.rejectDialog},on:{"update:visible":function(t){e.rejectDialog=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"取消理由"}},[a("el-input",{attrs:{placeholder:"请填写不通过的理由","auto-complete":"off"},model:{value:e.rejectReason,callback:function(t){e.rejectReason=t},expression:"rejectReason"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.rejectDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){e.cancel(t.$index,e.orderData)}}},[e._v("确 定")])],1)],1)]}}])})],1)],1)],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var j=a("VU/8")(z,B,!1,function(e){a("ZD5R")},"data-v-36b3c54a",null).exports,P=a("tL5H"),R={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{name:"form",model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"图书名字"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图书作者"}},[a("el-input",{model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出版社"}},[a("el-input",{model:{value:e.form.pubHouse,callback:function(t){e.$set(e.form,"pubHouse",t)},expression:"form.pubHouse"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图书id"}},[a("el-input",{model:{value:e.form.isbn,callback:function(t){e.$set(e.form,"isbn",t)},expression:"form.isbn"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图书供方"}},[a("el-input",{model:{value:e.form.provider,callback:function(t){e.$set(e.form,"provider",t)},expression:"form.provider"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图书介绍"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"横幅图片",prop:"image"}},[a("el-upload",{staticClass:"upload-demo",attrs:{"list-type":"picture","on-change":e.onChange,"auto-upload":!1,"before-upload":e.beforeUpload,"on-error":e.uploadError,"on-success":e.uploadSuccess,name:"image",action:"#","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.activityList}},[a("el-tooltip",{attrs:{content:"请上传以.png.jpg.jpeg为后缀的图片(只限一个，多次上传会覆盖)",placement:"top",effect:"light"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")])],1)],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit()}}},[e._v("立即添加")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var M=function(e){a("F2QV")},$=a("VU/8")(P.a,R,!1,M,"data-v-f614ace4",null).exports,U={name:"ManageBook",data:function(){return{bookData:[],currentPage:1,totalSize:0,pageSize:10}},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e},handleCurrentChange:function(e){console.log("当前页: "+e),this.getBook(e)},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+(t.getMinutes()+":")+t.getSeconds()},getBook:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this,a=new URLSearchParams;a.append("randby",1),a.append("currentPage",e),s()({method:"post",dataType:"jsonp",url:"http://47.93.190.186:8080/getBookList.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(e){if(t.bookData=[],102==e.data.statusCode){var a=e.data.result.pageData;console.log(a);for(var o=0;o<a.length;o++)console.log(a[o].pubDate),a[o].pubDate=t.timestampToTime(a[o].pubDate),a[o].bookImg="http://47.93.190.186:8080"+a[o].bookImg,t.bookData.push(a[o]);t.pageSize=e.data.result.pageCount,t.totalSize=e.data.result.totalCount}else alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},handleDelete:function(e,t){console.log(t[e]);var a=new URLSearchParams;a.append("isbn",t[e].isbn),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/deleteBook.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(a){102==a.data.statusCode?t[e].stock--:alert(a.data.message)}).catch(function(e){alert("请检查网络连接")})},handleAdd:function(e,t){console.log(t[e]);var a=new URLSearchParams;a.append("isbn",t[e].isbn),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addBookById.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(a){102==a.data.statusCode?t[e].stock++:alert(a.data.message)}).catch(function(e){alert("请检查网络连接")})}},mounted:function(){this.getBook()}},L={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.bookData}},[a("el-table-column",{attrs:{prop:"isbn",label:"书isbn"}}),e._v(" "),a("el-table-column",{attrs:{label:"封面"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v(e._s(t.row.name))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("img",{attrs:{width:"50px",height:"50px",src:t.row.bookImg}})])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"provider",label:"提供者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"书名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"author",label:"作者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pubHouse",label:"出版社"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pubDate",label:"入库时间",align:"center",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{label:"图书评分"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("评分人数: "+e._s(t.row.scoreCnt))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.score))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"votes",label:"投票数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"书籍简述"}}),e._v(" "),a("el-table-column",{attrs:{label:"库存（含详细信息）"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("评论量: "+e._s(t.row.commentCnt))]),e._v(" "),a("p",[e._v("借阅量: "+e._s(t.row.readCnt))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[e._v(e._s(t.row.stock))])],1)])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleAdd(t.$index,e.bookData)}}},[e._v("增数")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,e.bookData)}}},[e._v("减数")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var F=a("VU/8")(U,L,!1,function(e){a("PuxJ")},"data-v-8139d8f0",null).exports,H={name:"SearchShareBook",data:function(){return{phone:"",state:"",activeName:"0",shareData:[],activityList:[],rejectReason:"",rejectDialog:!1,phoneDialog:!1,currentPage4:1,pageSize:10,startNum:0,totalSize:0,isByPhone:!1}},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e,this.isByPhone?this.searchShareBookByPhone(this.startNum,this.pageSize):this.searchShareBookByState(this.activeName,this.startNum,this.pageSize)},handleCurrentChange:function(e){console.log("当前页: "+e),this.startNum=(e-1)*this.pageSize,this.isByPhone?this.searchShareBookByPhone(this.startNum,this.pageSize):this.searchShareBookByState(this.activeName,this.startNum,this.pageSize)},handleClick:function(e,t){console.log(e.name),this.startNum=0,this.currentPage4=1,this.isByPhone||this.searchShareBookByState(e.name),this.isByPhone=!1},onChange:function(e,t){console.log(t)},beforeUpload:function(e){console.log(e)},handleRemove:function(e,t){},handlePreview:function(e){console.log(e)},uploadSuccess:function(e,t,a){4007==e.status&&this.$message.warning(e.msg+",请重传以.doc或.docx为后缀的文件/以.png、.jpg、.jpeg为后缀的图片"),console.log(e)},uploadError:function(e,t,a){this.$message.warning("上传失败,请检查网络连接"),console.log(e),console.log(a)},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+(t.getMinutes()+":")+t.getSeconds()},addShareBook:function(e,t,a){var o=T()("form[name="+a+"]");console.log(o);var n=new FormData(o[0]);n.append("name",t[e].name),n.append("author",t[e].author),n.append("pubHouse",t[e].pubHouse),n.append("isbn",t[e].bookId),n.append("description",t[e].description),n.append("shareId",t[e].shareId),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addShareBook.do",data:n,cache:!1,processData:!1,contentType:!1}).then(function(a){console.log(a),4005==a.data.statusCode?alert(a.data.message):102==a.data.statusCode?t.splice(e,1):alert(a.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},pass:function(e,t){var a=new URLSearchParams;a.append("shareId",this.shareData[e].shareId),a.append("result",0),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/checkShares.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(a){102==a.data.statusCode?t.splice(e,1):alert(a.data.message)}).catch(function(e){alert("请检查网络连接")})},cancel:function(e,t){console.log(e,t);var a=this,o=new URLSearchParams;o.append("shareId",this.shareData[e].shareId),o.append("result",1),o.append("reason",this.rejectReason),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/checkShares.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){a.rejectDialog=!1,102==o.data.statusCode?(t.splice(e,1),a.rejectReason=""):alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})},handleDelete:function(e,t){console.log(t[e]);var a=new URLSearchParams;a.append("isbn",t[e].bookId),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/deleteBook.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(e){e.data.statusCode,alert(e.data.message)}).catch(function(e){alert("请检查网络连接")})},searchShareBookByPhone:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e5;this.isByPhone=!0,T()("#tab-3").click(),this.shareData.length=0;var a=this,o=new URLSearchParams;o.append("phone",this.phone),o.append("start_num",e),o.append("page_size",t),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/searhShareBookByPhone.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(e){if(a.phoneDialog=!1,0==a.shareData.length)if(102==e.data.statusCode){for(var o=e.data.result,n=0;n<o.length;n++)o[n].delieverWay=0==o[n].delieverWay?"分享者拿书过来":"社团自取分享书",o[n].proposedDate=a.timestampToTime(o[n].proposedDate),a.shareData.push(o[n]);1e5==t&&0==a.startNum&&(a.totalSize=a.shareData.length,a.shareData.length=0,a.searchShareBookByPhone(a.startNum,a.pageSize)),console.log(a.shareData)}else alert(e.data.message)}).catch(function(e){alert("请检查网络连接")})},searchShareBookByState:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e5;this.shareData=[];var o=this;this.isByPhone=!1;var n=new URLSearchParams;n.append("state",e),n.append("start_num",t),n.append("page_size",a),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/searhUserShareBook.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:n}).then(function(e){if(console.log(e),102==e.data.statusCode){for(var t=e.data.result,n=0;n<t.length;n++)t[n].delieverWay=0==t[n].delieverWay?"分享者拿书过来":"社团自取分享书",t[n].proposedDate=o.timestampToTime(t[n].proposedDate),o.shareData.push(t[n]);1e5==a&&0==o.startNum&&(o.totalSize=o.shareData.length,o.searchShareBookByState(o.activeName,o.startNum,o.pageSize))}else alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})}},mounted:function(){this.searchShareBookByState(0)}},N={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{staticStyle:{float:"right","margin-top":"20px"},on:{click:function(t){e.phoneDialog=!0}}},[e._v("手机号查找")]),e._v(" "),a("el-tabs",{staticStyle:{clear:"both"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"待交接",name:"0"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.shareData}},[a("el-table-column",{attrs:{prop:"userId",label:"分享者id"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"phone",label:"手机号",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"author",label:"作者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pubHouse",label:"出版社"}}),e._v(" "),a("el-table-column",{attrs:{prop:"proposedDate",label:"分享日期",width:"160",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"delieverWay",label:"交接方式"}}),e._v(" "),a("el-table-column",{attrs:{prop:"location",label:"上门领书地点"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.pass(t.$index,e.shareData)}}},[e._v("通过")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.rejectDialog=!0}}},[e._v("取消")]),e._v(" "),a("el-dialog",{attrs:{title:"取消理由",visible:e.rejectDialog},on:{"update:visible":function(t){e.rejectDialog=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"取消理由"}},[a("el-input",{attrs:{placeholder:"请填写不通过的理由","auto-complete":"off"},model:{value:e.rejectReason,callback:function(t){e.rejectReason=t},expression:"rejectReason"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.rejectDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(a){e.cancel(t.$index,e.shareData)}}},[e._v("确 定")])],1)],1)]}}])})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"已取消",name:"1"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.shareData}},[a("el-table-column",{attrs:{prop:"userId",label:"分享者id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",align:"center",width:"140",label:"手机号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"author",label:"作者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pubHouse",label:"出版社"}}),e._v(" "),a("el-table-column",{attrs:{prop:"proposedDate",width:"160",align:"center",label:"分享日期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"delieverWay",label:"交接方式"}}),e._v(" "),a("el-table-column",{attrs:{prop:"location",label:"上门领书地点"}})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"已入库",name:"2"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.shareData}},[a("el-table-column",{attrs:{prop:"userId",label:"分享者id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号",width:"140",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"author",label:"作者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pubHouse",label:"出版社"}}),e._v(" "),a("el-table-column",{attrs:{prop:"proposedDate",label:"分享日期",align:"center",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"delieverWay",label:"交接方式"}}),e._v(" "),a("el-table-column",{attrs:{prop:"location",label:"上门领书地点"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,e.shareData)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"待交书",name:"3"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.shareData}},[a("el-table-column",{attrs:{prop:"userId",label:"分享者id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号",align:"center",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"author",label:"作者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pubHouse",label:"出版社"}}),e._v(" "),a("el-table-column",{attrs:{prop:"proposedDate",label:"分享日期",align:"center",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"delieverWay",label:"交接方式"}}),e._v(" "),a("el-table-column",{attrs:{prop:"location",label:"上门领书地点"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{ref:"form",attrs:{name:e.shareData[t.$index].shareId}},[a("el-form-item",{attrs:{label:""}},[a("el-upload",{staticClass:"upload-demo",attrs:{"list-type":"picture","on-change":e.onChange,"auto-upload":!1,"before-upload":e.beforeUpload,"on-error":e.uploadError,"on-success":e.uploadSuccess,name:"image",action:"#","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.activityList}},[a("el-tooltip",{attrs:{content:"请上传以.png.jpg.jpeg为后缀的图片(只限一个，多次上传会覆盖)",placement:"top",effect:"light"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")])],1)],1)],1),e._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"图书isbn"},model:{value:e.shareData[t.$index].bookId,callback:function(a){e.$set(e.shareData[t.$index],"bookId",a)},expression:"shareData[scope.$index].bookId"}})],1),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.addShareBook(t.$index,e.shareData,e.shareData[t.$index].shareId)}}},[e._v("入库")])],1)]}}])})],1)],1)],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage4,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("el-dialog",{attrs:{title:"手机号查找用户分享书籍",visible:e.phoneDialog},on:{"update:visible":function(t){e.phoneDialog=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{attrs:{placeholder:"请填写用户手机号来查找其分享书","auto-complete":"off"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.phoneDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.searchShareBookByPhone()}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var V=a("VU/8")(H,N,!1,function(e){a("JXwx")},"data-v-3b2d2b3c",null).exports,E=a("wOpa"),W={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{name:"form",model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"图书名字"}},[a("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图书介绍"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图书封面",prop:"image"}},[a("el-upload",{staticClass:"upload-demo",attrs:{"list-type":"picture","on-change":e.onChange,"auto-upload":!1,"before-upload":e.beforeUpload,"on-error":e.uploadError,"on-success":e.uploadSuccess,name:"image",action:"#","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.activityList}},[a("el-tooltip",{attrs:{content:"请上传以.png.jpg.jpeg为后缀的图片(只限一个，多次上传会覆盖)",placement:"top",effect:"light"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")])],1)],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit()}}},[e._v("添加好书")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("重置")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.bookData}},[a("el-table-column",{attrs:{prop:"goodbookId",label:"书isbn"}}),e._v(" "),a("el-table-column",{attrs:{label:"封面"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v(e._s(t.row.name))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("img",{attrs:{width:"50px",height:"50px",src:t.row.picture}})])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"书名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"书籍简述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"入库时间",align:"center",width:"165"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,e.bookData)}}},[e._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var A=function(e){a("PjRq")},q=a("VU/8")(E.a,W,!1,A,"data-v-64e53032",null).exports,Y={name:"ManageBookComment",data:function(){return{bookData:[],currentPage:1,totalSize:0,pageSize:10,commentDetail:!1,detailData:[{title:""}]}},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e},handleCurrentChange:function(e){console.log("当前页: "+e),this.getBookComment(e)},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+(t.getMinutes()+":")+t.getSeconds()},getBookComment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this,a=new URLSearchParams;a.append("currentPage",e),s()({method:"post",dataType:"jsonp",url:"http://47.93.190.186:8080/getPostList.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(e){if(t.bookData=[],102==e.data.statusCode){var a=e.data.result.pageData;console.log(a);for(var o=0;o<a.length;o++)console.log(a[o].pubDate),a[o].pubDate=t.timestampToTime(a[o].pubDate),a[o].isLegal=1==a[o].isLegal?"合法":"非法",a[o].pictures="http://47.93.190.186:8080"+a[o].pictures,t.bookData.push(a[o]);t.pageSize=e.data.result.pageCount,t.totalSize=e.data.result.totalCount}else alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},checkComment:function(e,t){var a=this;console.log(t[e]),this.commentDetail=!0;var o=new URLSearchParams;o.append("commentId",t[e].commentId),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/getComments.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(o){if(a.detailData=[],102==o.data.statusCode){var n=o.data.post.commentList;console.log(n);for(var l=0;l<n.length;l++)n[l].time=a.timestampToTime(n[l].time),n[l].title=t[e].title,a.detailData.push(n[l]);console.log(a.detailData)}else alert(o.data.message)}).catch(function(e){alert("请检查网络连接")})}},mounted:function(){this.getBookComment()}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.bookData}},[a("el-table-column",{attrs:{prop:"bookId",label:"书isbn"}}),e._v(" "),a("el-table-column",{attrs:{label:"封面"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v(e._s(t.row.name))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("img",{attrs:{width:"50px",height:"50px",src:t.row.bookImg}})])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),a("el-table-column",{attrs:{label:"书评者"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("评论id: "+e._s(t.row.commentId))]),e._v(" "),a("p",[e._v("书评者id: "+e._s(t.row.userId))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[e._v("\n\t\t\t\t\t\t"+e._s(t.row.nickName)+"\n\t\t\t\t\t")])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"书评标题"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"content",label:"书评内容",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"commentCnt",label:"评论量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"stars",label:"获赞量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isLegal",label:"是否合法"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pubDate",label:"入库时间",align:"center",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.checkComment(t.$index,e.bookData)}}},[e._v("查看书评详情")]),e._v(" "),a("el-dialog",{attrs:{title:"书评标题："+e.detailData[0].title,visible:e.commentDetail},on:{"update:visible":function(t){e.commentDetail=t}}},[a("div",{staticClass:"comments"},e._l(e.detailData,function(t){return a("div",[a("div",{staticClass:"comment"},[a("div",{staticClass:"cavatar"},[a("img",{attrs:{width:"50",height:"50",src:t.fromIdPic}})]),e._v(" "),a("div",{staticClass:"cdetail"},[a("div",{staticClass:"cinfo"},[a("span",{staticClass:"cname"},[e._v(e._s(t.fromName))]),e._v(" "),a("span",[e._v(e._s(0==t.commentType?"评论:":"回复"))]),e._v(" "),a("span",{staticClass:"cname"},[e._v(e._s(1==t.commentType?t.atName+":":""))]),e._v(" "),a("div",{staticClass:"ccontent"},[e._v(e._s(t.ucontent))])]),e._v(" "),a("div",{staticClass:"ctime"},[e._v(e._s(t.time))])])])])})),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.commentDetail=!1}}},[e._v("确 定")])],1)])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var O=a("VU/8")(Y,G,!1,function(e){a("dTDf")},"data-v-58d6411f",null).exports,J={name:"ManageGoodBookComment",data:function(){return{form:{postContent:"",postBookName:"",postAuthor:"",wonderfulPostId:""},bookData:[],currentPage:1,totalSize:0,pageSize:10}},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e},handleCurrentChange:function(e){console.log("当前页: "+e),this.getBookComment(e)},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+(t.getMinutes()+":")+t.getSeconds()},addGoodComment:function(){var e=this,t=new URLSearchParams;t.append("postContent",this.form.postContent),t.append("postBookName",this.form.postBookName),t.append("postAuthor",this.form.postAuthor),""!=this.form.wonderfulPostId&&t.append("wonderfulPostId",this.form.wonderfulPostId),s()({method:"post",dataType:"json",url:""!=this.form.wonderfulPostId?"http://47.93.190.186:8080/updateWonderfulPost.do":"http://47.93.190.186:8080/addWonderfulPost.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:t}).then(function(t){102==t.data.statusCode?e.getBookComment(0,10):alert(t.data.message)}).catch(function(e){alert("请检查网络连接")})},getBookComment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4,a=this,o=new URLSearchParams;o.append("start_num",e),o.append("page_size",t),s()({method:"post",dataType:"jsonp",url:"http://47.93.190.186:8080/getWonderfulPost.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(e){if(a.bookData=[],102==e.data.statusCode){var t=e.data.result;console.log(t);for(var o=0;o<t.length;o++)console.log(t[o].pubDate),t[o].postTime=a.timestampToTime(t[o].postTime),t[o].pictures="http://47.93.190.186:8080"+t[o].pictures,a.bookData.push(t[o])}else alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},handleDelete:function(e,t){console.log(t[e]);var a=new URLSearchParams;a.append("wonderfulPostId",t[e].wonderfulPostId),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/deleteWonderfulPost.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(a){102==a.data.statusCode?t.splice(e,1):alert(a.data.message)}).catch(function(e){alert("请检查网络连接")})},handleAdd:function(e,t){console.log(t[e]);var a=new URLSearchParams;a.append("isbn",t[e].isbn),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addBookById.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(a){102==a.data.statusCode?t[e].stock++:alert(a.data.message)}).catch(function(e){alert("请检查网络连接")})}},mounted:function(){this.getBookComment()}},Q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{name:"form",model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"已存在的书评"}},[a("el-input",{model:{value:e.form.postContent,callback:function(t){e.$set(e.form,"postContent",t)},expression:"form.postContent"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所评论的书名"}},[a("el-input",{model:{value:e.form.postBookName,callback:function(t){e.$set(e.form,"postBookName",t)},expression:"form.postBookName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"书评作者"}},[a("el-input",{model:{value:e.form.postAuthor,callback:function(t){e.$set(e.form,"postAuthor",t)},expression:"form.postAuthor"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"书评id"}},[a("el-input",{attrs:{placeholder:"新增不用填写，若更新现有精彩书评需填写原书评id"},model:{value:e.form.wonderfulPostId,callback:function(t){e.$set(e.form,"wonderfulPostId",t)},expression:"form.wonderfulPostId"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addGoodComment()}}},[e._v("添加/更新")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("重置")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.bookData}},[a("el-table-column",{attrs:{prop:"wonderfulPostId",label:"评论id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"postBookName",label:"书名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"postAuthor",label:"评论者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"postContent",label:"评论内容"}}),e._v(" "),a("el-table-column",{attrs:{prop:"postTime",label:"评论时间",align:"center",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleAdd(t.$index,e.bookData)}}},[e._v("增数")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,e.bookData)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var Z=a("VU/8")(J,Q,!1,function(e){a("OuWC")},"data-v-6e0b438c",null).exports,X={name:"ManageVote",data:function(){return{bookData:[],activityList:[],form:{bookName:"",author:"",pubHouse:"",voteReason:"",voteBookId:"",image:"11"},fileList:[],rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],region:[{required:!0,message:"请选择活动区域",trigger:"change"}],date1:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],date2:[{type:"date",required:!0,message:"请选择时间",trigger:"change"}],type:[{type:"array",required:!0,message:"请至少选择一个活动性质",trigger:"change"}],resource:[{required:!0,message:"请选择活动资源",trigger:"change"}],desc:[{required:!0,message:"请填写活动形式",trigger:"blur"}]}}},methods:{onChange:function(e,t){console.log(document.querySelector("input[type=file]").files),console.log(t)},beforeUpload:function(e){console.log(e)},openVote:function(){s()({method:"get",dataType:"jsonp",url:"http://47.93.190.186:8080/openVote.do"}).then(function(e){e.data.statusCode,alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},closeVote:function(){s()({method:"get",dataType:"jsonp",url:"http://47.93.190.186:8080/closeVote.do"}).then(function(e){e.data.statusCode,alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},againVote:function(){s()({method:"get",dataType:"jsonp",url:"http://47.93.190.186:8080/againVote.do"}).then(function(e){e.data.statusCode,alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},onSubmit:function(e){var t=this,a=this,o=T()("form[name=form]"),n=new FormData(o[0]);n.append("bookName",this.form.bookName),n.append("author",this.form.author),n.append("pubHouse",this.form.pubHouse),n.append("voteReason",this.form.voteReason),""!=this.form.voteBookId&&n.append("voteBookId",this.form.voteBookId),this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;s()({method:"post",dataType:"json",url:""!=t.form.voteBookId?"http://47.93.190.186:8080/updateVoteBook.do":"http://47.93.190.186:8080/addVoteBook.do",data:n,cache:!1,processData:!1,contentType:!1}).then(function(e){console.log(e),102==e.data.statusCode?a.getVoteBooks():alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})})},resetForm:function(e){this.$refs[e].resetFields()},handleRemove:function(e,t){},handlePreview:function(e){console.log(e)},uploadSuccess:function(e,t,a){4007==e.status&&this.$message.warning(e.msg+",请重传以.png、.jpg、.jpeg为后缀的图片"),console.log(e)},uploadError:function(e,t,a){this.$message.warning("上传失败,请检查网络连接"),console.log(e),console.log(a)},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},getVoteBooks:function(){var e=this;s()({method:"get",dataType:"jsonp",url:"http://47.93.190.186:8080/getVoteBooks.do"}).then(function(t){if(e.bookData=[],102==t.data.statusCode){var a=t.data.result;console.log(a);for(var o=0;o<a.length;o++)a[o].bookImg="http://47.93.190.186:8080"+a[o].bookImg,e.bookData.push(a[o])}else alert(t.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},handleDelete:function(e,t){console.log(t[e]);var a=new URLSearchParams;a.append("voteBookId",t[e].voteBookId),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/deleteVoteBook.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(a){102==a.data.statusCode?t.splice(e,1):alert(a.data.message)}).catch(function(e){alert("请检查网络连接")})},handleAdd:function(e,t){console.log(t[e]);var a=new URLSearchParams;a.append("isbn",t[e].isbn),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addBookById.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(a){102==a.data.statusCode?t[e].stock++:alert(a.data.message)}).catch(function(e){alert("请检查网络连接")})}},mounted:function(){this.getVoteBooks()}},K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{rules:e.rules,name:"form",model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"图书名字"}},[a("el-input",{model:{value:e.form.bookName,callback:function(t){e.$set(e.form,"bookName",t)},expression:"form.bookName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"作者"}},[a("el-input",{model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出版社"}},[a("el-input",{model:{value:e.form.pubHouse,callback:function(t){e.$set(e.form,"pubHouse",t)},expression:"form.pubHouse"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"推荐投票理由"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.voteReason,callback:function(t){e.$set(e.form,"voteReason",t)},expression:"form.voteReason"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图书封面",prop:"image"}},[a("el-upload",{staticClass:"upload-demo",attrs:{"list-type":"picture","on-change":e.onChange,"auto-upload":!1,"before-upload":e.beforeUpload,"on-error":e.uploadError,"on-success":e.uploadSuccess,name:"image",action:"#","on-preview":e.handlePreview,"on-remove":e.handleRemove,"file-list":e.activityList}},[a("el-tooltip",{attrs:{content:"请上传以.png.jpg.jpeg为后缀的图片(只限一个，多次上传会覆盖)",placement:"top",effect:"light"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传图片")])],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"投票书isbn"}},[a("el-input",{attrs:{placeholder:"新增的不必填，更新投票书的时候需填上相应书isbn"},model:{value:e.form.voteBookId,callback:function(t){e.$set(e.form,"voteBookId",t)},expression:"form.voteBookId"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit("form")}}},[e._v("添加/更新")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("重置")]),e._v(" "),a("el-button",{on:{click:function(t){e.openVote()}}},[e._v("开启投票通道")]),e._v(" "),a("el-button",{on:{click:function(t){e.closeVote()}}},[e._v("关闭投票通道")]),e._v(" "),a("el-button",{on:{click:function(t){e.againVote()}}},[e._v("重置投票")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.bookData}},[a("el-table-column",{attrs:{prop:"voteBookId",label:"书isbn"}}),e._v(" "),a("el-table-column",{attrs:{label:"封面"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v(e._s(t.row.bookName))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("img",{attrs:{width:"50px",height:"50px",src:t.row.bookImg}})])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"author",label:"作者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pubHouse",label:"出版社"}}),e._v(" "),a("el-table-column",{attrs:{prop:"voteReason",label:"投票理由"}}),e._v(" "),a("el-table-column",{attrs:{prop:"votes",label:"投票数"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,e.bookData)}}},[e._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var ee=a("VU/8")(X,K,!1,function(e){a("iGLD")},"data-v-3565d87b",null).exports,te={name:"ManageHelp",data:function(){return{activityList:[],form:{question:"",answer:""},helpData:[]}},methods:{handleDelete:function(e,t){console.log(t[e]);var a=new URLSearchParams;a.append("helpId",t[e].qandaId),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/deleteHelp.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(a){102==a.data.statusCode?t.splice(e,1):alert(a.data.message)}).catch(function(e){alert("请检查网络连接")})},onSubmit:function(){var e=this,t=new URLSearchParams;t.append("question",this.form.question),t.append("answer",this.form.answer),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addHelp.do",data:t}).then(function(t){102==t.data.statusCode?e.getHelps():alert(t.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+(t.getMinutes()+":")+t.getSeconds()},getHelps:function(){var e=this;s()({method:"get",dataType:"json",url:"http://47.93.190.186:8080/getHelps.do"}).then(function(t){if(console.log(t),102==t.data.statusCode){e.helpData=[];for(var a=t.data.helps,o=0;o<a.length;o++)a[o].pushDate=e.timestampToTime(a[o].pushDate),e.helpData.push(a[o])}else alert(t.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},resetForm:function(e){this.$refs[e].resetFields()}},mounted:function(){this.getHelps()}},ae={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{name:"form",model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"问题"}},[a("el-input",{model:{value:e.form.question,callback:function(t){e.$set(e.form,"question",t)},expression:"form.question"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"答案"}},[a("el-input",{model:{value:e.form.answer,callback:function(t){e.$set(e.form,"answer",t)},expression:"form.answer"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSubmit()}}},[e._v("新增")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("form")}}},[e._v("重置")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.helpData}},[a("el-table-column",{attrs:{prop:"qandaId",label:"id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"question",label:"问题"}}),e._v(" "),a("el-table-column",{attrs:{prop:"answer",label:"答案"}}),e._v(" "),a("el-table-column",{attrs:{prop:"helpfulCnt",label:"帮助量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pushDate",label:"发布时间",align:"center",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"isDelete",label:"是否删除"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,e.helpData)}}},[e._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var oe=a("VU/8")(te,ae,!1,function(e){a("QkSu")},"data-v-6459eb39",null).exports,ne={name:"CheckFeedbacks",data:function(){return{activityList:[],feedbacksData:[],activeName:"feedback",feedbackResult:"",selectIndex:0,replyDialog:!1,currentPage:1,totalSize:0,pageSize:10}},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e},handleCurrentChange:function(e){console.log("当前页: "+e),this.getBook(e)},showReply:function(e){this.selectIndex=e,this.replyDialog=!0},reply:function(e,t){var a=this;console.log(t[e]);var o=new URLSearchParams;o.append("feedbackId",t[e].feedbackId),o.append("userId",t[e].userId),o.append("feedbackResult",this.feedbackResult),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/dealFeedback.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(e){a.replyDialog=!1,102==e.data.statusCode||alert(e.data.message)}).catch(function(e){alert("请检查网络连接")})},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},getFeedbacks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=this,a=new URLSearchParams;a.append("currentPage",e),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/getFeedbackList.do",data:a}).then(function(e){if(console.log(e),102==e.data.statusCode){t.feedbacksData=[];for(var a=e.data.result.pageData,o=0;o<a.length;o++)a[o].printscreen="http://47.93.190.186:8080"+a[o].printscreen,a[o].proposedDate=t.timestampToTime(a[o].proposedDate),t.feedbacksData.push(a[o]);t.pageSize=e.data.result.pageCount,t.totalSize=e.data.result.totalCount}else alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},resetForm:function(e){this.$refs[e].resetFields()}},mounted:function(){this.getFeedbacks()}},le={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.feedbacksData}},[a("el-table-column",{attrs:{label:"封面"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("反馈 id: "+e._s(t.row.feedbackId))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("img",{attrs:{width:"50px",height:"50px",src:t.row.printscreen}})])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"反馈者id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),e._v(" "),a("el-table-column",{attrs:{prop:"detail",label:"反馈内容"}}),e._v(" "),a("el-table-column",{attrs:{prop:"proposedDate",label:"反馈日期",align:"center",width:"165"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.showReply(t.$index)}}},[e._v("回复")]),e._v(" "),a("el-dialog",{attrs:{title:"回复意见反馈",visible:e.replyDialog},on:{"update:visible":function(t){e.replyDialog=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"回复内容"}},[a("el-input",{attrs:{placeholder:"请填写","auto-complete":"off"},model:{value:e.feedbackResult,callback:function(t){e.feedbackResult=t},expression:"feedbackResult"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.replyDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.reply(e.selectIndex,e.feedbacksData)}}},[e._v("确 定")])],1)],1)]}}])})],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var re=a("VU/8")(ne,le,!1,function(e){a("N4Vv")},"data-v-7de0cac2",null).exports,se={name:"CheckReports",data:function(){return{activityList:[],reportsData:[],activeName:"0",feedbackResult:"",currentPage:1,totalSize:0,pageSize:10}},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e},handleCurrentChange:function(e){console.log("当前页: "+e),this.getBook(e)},handleClick:function(e,t){console.log(e,t),this.getReports(1,e.name)},ignore:function(e,t){var a=new URLSearchParams;a.append("reportId",t[e].reportId),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/ignoreReport.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(a){102==a.data.statusCode?t.splice(e,1):alert(a.data.message)}).catch(function(e){alert("请检查网络连接")})},deleteReports:function(e,t){var a=new URLSearchParams;a.append("uCommentId",t[e].uCommentId),a.append("userId",t[e].userId),a.append("commentId",t[e].commentId),a.append("type",0==t[e].type?0:1),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/deleteCommentByType.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(a){102==a.data.statusCode?t.splice(e,1):alert(a.data.message)}).catch(function(e){alert("请检查网络连接")})},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},getReports:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this,o=new URLSearchParams;o.append("currentPage",e),o.append("isdone",t),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/getReportList.do",data:o}).then(function(e){if(console.log(e),102==e.data.statusCode){a.reportsData=[];for(var t=e.data.result.pageData,o=0;o<t.length;o++)t[o].printscreen="http://47.93.190.186:8080"+t[o].printscreen,t[o].proposedDate=a.timestampToTime(t[o].proposedDate),a.reportsData.push(t[o]);a.pageSize=e.data.result.pageCount,a.totalSize=e.data.result.totalCount,console.log(a.reportsData)}else alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},resetForm:function(e){this.$refs[e].resetFields()}},mounted:function(){this.getReports()}},ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"没处理",name:"0"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.reportsData}},[a("el-table-column",{attrs:{label:"封面"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("反馈 id: "+e._s(t.row.feedbackId))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("img",{attrs:{width:"50px",height:"50px",src:t.row.printscreen}})])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"反馈者id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),e._v(" "),a("el-table-column",{attrs:{prop:"detail",label:"反馈内容"}}),e._v(" "),a("el-table-column",{attrs:{prop:"proposedDate",label:"反馈日期",align:"center",width:"165"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.ignore(t.$index,e.reportsData)}}},[e._v("忽略")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.deleteReports(t.$index,e.reportsData)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"已处理",name:"1"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.reportsData}},[a("el-table-column",{attrs:{label:"封面"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("p",[e._v("反馈 id: "+e._s(t.row.feedbackId))]),e._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("img",{attrs:{width:"50px",height:"50px",src:t.row.printscreen}})])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"反馈者id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"标题"}}),e._v(" "),a("el-table-column",{attrs:{prop:"detail",label:"反馈内容"}}),e._v(" "),a("el-table-column",{attrs:{prop:"proposedDate",label:"反馈日期",align:"center",width:"165"}})],1)],1)],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var ce=a("VU/8")(se,ie,!1,function(e){a("95Hn")},"data-v-900664b8",null).exports,de={name:"ManageWishBook",data:function(){return{activityList:[],wishBookData:[],activeName:"0",feedbackResult:"",currentPage:1,totalSize:0,pageSize:10}},methods:{handleSizeChange:function(e){console.log("每页 "+e+" 条"),this.pageSize=e},handleCurrentChange:function(e){console.log("当前页: "+e),this.getBook(e)},handleClick:function(e,t){console.log(e,t),this.getWishBook(1,e.name)},ignore:function(e,t){var a=new URLSearchParams;a.append("wishId",t[e].wishId),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/ignoreWishBook.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(a){102==a.data.statusCode?t.splice(e,1):alert(a.data.message)}).catch(function(e){alert("请检查网络连接")})},pass:function(e,t){var a=new URLSearchParams;a.append("wishId",t[e].wishId),a.append("userId",t[e].userId),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/storageWishBook.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(a){102==a.data.statusCode?t.splice(e,1):alert(a.data.message)}).catch(function(e){alert("请检查网络连接")})},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},getWishBook:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=this,o=new URLSearchParams;o.append("currentPage",e),o.append("type",t),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/getWishBookList.do",data:o}).then(function(e){if(console.log(e),102==e.data.statusCode){a.wishBookData=[];for(var t=e.data.result.pageData,o=0;o<t.length;o++)t[o].wishDate=a.timestampToTime(t[o].wishDate),a.wishBookData.push(t[o]);a.pageSize=e.data.result.pageCount,a.totalSize=e.data.result.totalCount,console.log(a.wishBookData)}else alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},resetForm:function(e){this.$refs[e].resetFields()}},mounted:function(){this.getWishBook()}},ue={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"没处理",name:"0"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.wishBookData}},[a("el-table-column",{attrs:{prop:"userId",label:"用户id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"author",label:"作者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pubHouse",label:"出版社"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wishId",label:"愿望id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wishDetail",label:"愿望描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wishDate",label:"许愿日期",align:"center",width:"165"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.pass(t.$index,e.wishBookData)}}},[e._v("入库")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.ignore(t.$index,e.wishBookData)}}},[e._v("忽略")])]}}])})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"已处理",name:"1"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.wishBookData}},[a("el-table-column",{attrs:{prop:"userId",label:"用户id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"bookName",label:"书名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"author",label:"作者"}}),e._v(" "),a("el-table-column",{attrs:{prop:"pubHouse",label:"出版社"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wishId",label:"愿望id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wishDetail",label:"愿望描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"wishDate",label:"许愿日期",align:"center",width:"165"}})],1)],1)],1),e._v(" "),a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},staticRenderFns:[]};var pe=a("VU/8")(de,ue,!1,function(e){a("Vcxf")},"data-v-4eee2d8c",null).exports,me={name:"ManageTimeSlot",data:function(){return{isAdd:!1,selectIndex:0,timeSlotData:[],activityList:[],userProtocol:"",startTime:"",endTime:"",updataTimeSlotDialog:!1,form:{title:"",pubHouse:"",description:"",image:"11"},fileList:[]}},methods:{test:function(e,t){console.log(e),console.log(t[e].slotId)},onChange:function(e,t){console.log(document.querySelector("input[type=file]").files),console.log(t)},beforeUpload:function(e){console.log(e)},showUpdate:function(e){this.selectIndex=e,this.updataTimeSlotDialog=!0},addTimeSlot:function(){this.isAdd=!1;var e=this,t=new URLSearchParams;this.updataTimeSlotDialog=!1,t.append("slotTime",this.startTime+"-"+this.endTime),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addTimeSlot.do",data:t,headers:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")}}).then(function(t){console.log(t),102==t.data.statusCode?e.getTimeSlots():alert(t.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},resetForm:function(e){this.$refs[e].resetFields()},handleRemove:function(e,t){},handlePreview:function(e){console.log(e)},uploadSuccess:function(e,t,a){4007==e.status&&this.$message.warning(e.msg+",请重传以.png、.jpg、.jpeg为后缀的图片"),console.log(e)},uploadError:function(e,t,a){this.$message.warning("上传失败,请检查网络连接"),console.log(e),console.log(a)},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},handleDelete:function(e,t){console.log(t[e]);var a=new URLSearchParams;a.append("slotId",t[e].slotId),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/deleteTimeSlot.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(a){102==a.data.statusCode?t.splice(e,1):alert(a.data.message)}).catch(function(e){alert("请检查网络连接")})},getTimeSlots:function(){var e=this;s()({method:"get",dataType:"jsonp",url:"http://47.93.190.186:8080/getTimeSlots.do"}).then(function(t){if(e.timeSlotData=[],102==t.data.statusCode)for(var a=t.data.result,o=0;o<a.length;o++)e.timeSlotData.push(a[o]);else alert(t.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},handleUpdate:function(e,t){console.log(e);var a=this,o=new URLSearchParams;this.updataTimeSlotDialog=!1,o.append("slotId",t[e].slotId),o.append("slotTime",this.startTime+"-"+this.endTime),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/updateTimeSlot.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:o}).then(function(e){102==e.data.statusCode?a.getTimeSlots():alert(e.data.message)}).catch(function(e){alert("请检查网络连接")})},handleAdd:function(e,t){console.log(t[e]);var a=new URLSearchParams;a.append("isbn",t[e].isbn),s()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addBookById.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(a){102==a.data.statusCode?t[e].stock++:alert(a.data.message)}).catch(function(e){alert("请检查网络连接")})}},mounted:function(){this.getTimeSlots()}},ge={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{staticClass:"add",attrs:{size:"mini"},on:{click:function(t){e.updataTimeSlotDialog=!0,e.isAdd=!0}}},[e._v("增加时间段")]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.timeSlotData}},[a("el-table-column",{attrs:{prop:"slotId",label:"id"}}),e._v(" "),a("el-table-column",{attrs:{prop:"slotTime",label:"预约时间段"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.showUpdate(t.$index)}}},[e._v("更新")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,e.timeSlotData)}}},[e._v("删除")]),e._v(" "),a("el-dialog",{attrs:{title:"更新预约时间段",visible:e.updataTimeSlotDialog},on:{"update:visible":function(t){e.updataTimeSlotDialog=t}}},[a("el-form",[a("el-time-select",{attrs:{placeholder:"起始时间","picker-options":{start:"08:00",step:"00:30",end:"23:00"}},model:{value:e.startTime,callback:function(t){e.startTime=t},expression:"startTime"}}),e._v(" "),a("el-time-select",{attrs:{placeholder:"结束时间","picker-options":{start:"08:00",step:"00:30",end:"23:00",minTime:e.startTime}},model:{value:e.endTime,callback:function(t){e.endTime=t},expression:"endTime"}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.updataTimeSlotDialog=!1}}},[e._v("取 消")]),e._v(" "),e.isAdd?a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.addTimeSlot(e.selectIndex,e.timeSlotData)}}},[e._v("增 加")]):a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleUpdate(e.selectIndex,e.timeSlotData)}}},[e._v("确 定")])],1)],1)]}}])})],1)],1)},staticRenderFns:[]};var he=a("VU/8")(me,ge,!1,function(e){a("5OYY")},"data-v-543a17af",null).exports;o.default.use(u.a);var fe=new u.a({routes:[{path:"/hello",name:"HelloWorld",component:m},{path:"/xuanxian",name:"xuanxian",component:h},{path:"/UserProtocol",name:"UserProtocol",component:b},{path:"/Carousel",name:"Carousel",component:S},{path:"/ManagePush",name:"ManagePush",component:x},{path:"/ManageOrder",name:"ManageOrder",component:j},{path:"/AddBook",name:"AddBook",component:$},{path:"/ManageBook",name:"ManageBook",component:F},{path:"/SearchShareBook",name:"SearchShareBook",component:V},{path:"/ManageGoodBooks",name:"ManageGoodBooks",component:q},{path:"/ManageBookComment",name:"ManageBookComment",component:O},{path:"/ManageGoodBookComment",name:"ManageGoodBookComment",component:Z},{path:"/ManageVote",name:"ManageVote",component:ee},{path:"/ManageHelp",name:"ManageHelp",component:oe},{path:"/CheckFeedbacks",name:"CheckFeedbacks",component:re},{path:"/CheckReports",name:"CheckReports",component:ce},{path:"/ManageWishBook",name:"ManageWishBook",component:pe},{path:"/ManageTimeSlot",name:"ManageTimeSlot",component:he}]});o.default.config.productionTip=!1,o.default.use(l.a),new o.default({el:"#app",router:fe,components:{App:d},template:"<App/>"})},OuWC:function(e,t){},PjRq:function(e,t){},PuxJ:function(e,t){},QkSu:function(e,t){},UMNk:function(e,t){},Vcxf:function(e,t){},ZD5R:function(e,t){},dTDf:function(e,t){},gYkm:function(e,t,a){"use strict";(function(e){var o=a("mtWM"),n=a.n(o);t.a={name:"ManagePush",data:function(){return{activityList:[],form:{title:"",url:"",image:""},fileList:[]}},methods:{onChange:function(e,t){console.log(document.querySelector("input[type=file]").files),console.log(t)},beforeUpload:function(e){console.log(e)},onSubmit:function(){var t=e("form[name=form]"),a=new FormData(t[0]);a.append("url",this.form.url),a.append("title",this.form.title),n()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addPush.do",data:a,cache:!1,processData:!1,contentType:!1}).then(function(e){console.log(e),e.data.statusCode,alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},resetForm:function(e){this.$refs[e].resetFields()},handleRemove:function(e,t){},handlePreview:function(e){console.log(e)},uploadSuccess:function(e,t,a){4007==e.status&&this.$message.warning(e.msg+",请重传以.png、.jpg、.jpeg为后缀的图片"),console.log(e)},uploadError:function(e,t,a){this.$message.warning("上传失败,请检查网络连接"),console.log(e),console.log(a)}},mounted:function(){}}}).call(t,a("7t+N"))},iGLD:function(e,t){},kI9G:function(e,t,a){"use strict";(function(e){var o=a("mtWM"),n=a.n(o);t.a={name:"Carousel",data:function(){return{activityList:[],form:{description:"",pushUrl:"",picture:""},fileList:[]}},methods:{onChange:function(e,t){console.log(document.querySelector("input[type=file]").files),console.log(t)},beforeUpload:function(e){console.log(e)},onSubmit:function(){var t=e("form[name=form]"),a=new FormData(t[0]);a.append("pushUrl",this.form.pushUrl),a.append("description",this.form.description),n()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addCarousel.do",data:a,headers:{"Content-Type":"multipart/form-data; boundary=----WebKitFormBoundaryZN8L8IJgRBAp5pTW"},cache:!1,processData:!1,contentType:!1}).then(function(e){console.log(e),e.data.statusCode,alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},resetForm:function(e){this.$refs[e].resetFields()},handleRemove:function(e,t){},handlePreview:function(e){console.log(e)},uploadSuccess:function(e,t,a){4007==e.status&&this.$message.warning(e.msg+",请重传以.png、.jpg、.jpeg为后缀的图片"),console.log(e)},uploadError:function(e,t,a){this.$message.warning("上传失败,请检查网络连接"),console.log(e),console.log(a)}},mounted:function(){}}}).call(t,a("7t+N"))},t2E5:function(e,t){},tL5H:function(e,t,a){"use strict";(function(e){var o=a("mtWM"),n=a.n(o);t.a={name:"AddBook",data:function(){return{activityList:[],form:{name:"",author:"",pubHouse:"",isbn:"",description:"",provider:"",image:"11"},fileList:[]}},methods:{onChange:function(e,t){console.log(document.querySelector("input[type=file]").files),console.log(t),this.form.image=e.url},beforeUpload:function(e){console.log(e)},onSubmit:function(){var t=e("form[name=form]"),a=new FormData(t[0]);a.append("name",this.form.name),a.append("author",this.form.author),a.append("pubHouse",this.form.pubHouse),a.append("isbn",this.form.isbn),a.append("description",this.form.description),a.append("provider",this.form.provider),n()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addBook.do",data:a,cache:!1,processData:!1,contentType:!1}).then(function(e){console.log(e),4005==e.data.statusCode?alert(e.data.message):(e.data.statusCode,alert(e.data.message))}).catch(function(e){console.log(e),alert("请检查网络连接")})},resetForm:function(e){this.$refs[e].resetFields()},handleRemove:function(e,t){},handlePreview:function(e){console.log(e)},uploadSuccess:function(e,t,a){4007==e.status&&this.$message.warning(e.msg+",请重传以.png、.jpg、.jpeg为后缀的图片"),console.log(e)},uploadError:function(e,t,a){this.$message.warning("上传失败,请检查网络连接"),console.log(e),console.log(a)}},mounted:function(){}}}).call(t,a("7t+N"))},tvR6:function(e,t){},wOpa:function(e,t,a){"use strict";(function(e){var o=a("mtWM"),n=a.n(o);t.a={name:"ManageGoodBooks",data:function(){return{bookData:[],activityList:[],form:{title:"",description:"",image:"11"},fileList:[]}},methods:{onChange:function(e,t){console.log(document.querySelector("input[type=file]").files),console.log(t)},beforeUpload:function(e){console.log(e)},onSubmit:function(){var t=this,a=e("form[name=form]"),o=new FormData(a[0]);o.append("title",this.form.title),o.append("description",this.form.description),n()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addGoodBook.do",data:o,cache:!1,processData:!1,contentType:!1}).then(function(e){console.log(e),102==e.data.statusCode?t.getBook():alert(e.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},resetForm:function(e){this.$refs[e].resetFields()},handleRemove:function(e,t){},handlePreview:function(e){console.log(e)},uploadSuccess:function(e,t,a){4007==e.status&&this.$message.warning(e.msg+",请重传以.png、.jpg、.jpeg为后缀的图片"),console.log(e)},uploadError:function(e,t,a){this.$message.warning("上传失败,请检查网络连接"),console.log(e),console.log(a)},timestampToTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},getBook:function(){var e=this;n()({method:"get",dataType:"jsonp",url:"http://47.93.190.186:8080/getGoodBooks.do"}).then(function(t){if(e.bookData=[],102==t.data.statusCode){var a=t.data.books;console.log(a);for(var o=0;o<a.length;o++)console.log(a[o].pubDate),a[o].date=e.timestampToTime(a[o].date),a[o].picture="http://47.93.190.186:8080"+a[o].picture,e.bookData.push(a[o])}else alert(t.data.message)}).catch(function(e){console.log(e),alert("请检查网络连接")})},handleDelete:function(e,t){console.log(t[e]);var a=new URLSearchParams;a.append("goodBookId",t[e].goodbookId),n()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/deleteGoodBook.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(a){102==a.data.statusCode?t.splice(e,1):alert(a.data.message)}).catch(function(e){alert("请检查网络连接")})},handleAdd:function(e,t){console.log(t[e]);var a=new URLSearchParams;a.append("isbn",t[e].isbn),n()({method:"post",dataType:"json",url:"http://47.93.190.186:8080/addBookById.do",header:{"Content-Type":"application/x-www-form-urlencoded","x-key":window.sessionStorage.getItem("adminId"),"x-token":window.sessionStorage.getItem("token")},data:a}).then(function(a){102==a.data.statusCode?t[e].stock++:alert(a.data.message)}).catch(function(e){alert("请检查网络连接")})}},mounted:function(){this.getBook()}}}).call(t,a("7t+N"))}},["NHnr"]);
//# sourceMappingURL=app.751dac2923e286249140.js.map